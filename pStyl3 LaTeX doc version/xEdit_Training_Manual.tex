%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%														%
%		xEdit Training Manual		%
%														%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\include{Header}			% Presettings for LaTeX



%
%
% Begin of the Document
%
%


\begin{document}


\begingroup
\pagenumbering{roman}
\pagestyle{empty}						% Removes the page number on the title page.


% Title Page

\vspace*{3mm}

\begin{flushright}
\large\textbf{xEdit Training Manual}


\vspace{75mm}

\huge{Tutorial for \textcolor[rgb]{0.43,0.52,0.37}{FO3Edit}/\textcolor[rgb]{0.61,0.16,0.15}{FNVEdit}/\textcolor[rgb]{0.25,0.418,0.48}{TES4Edit}/\textcolor[rgb]{0.238,0.285,0.285}{TES5Edit}}\normalsize

\vspace{1mm}

\noindent\rule{\textwidth}{2.0pt}

\vspace{4mm}

\LARGE{A Comprehensive Tutorial on Mod Management}\normalsize

\vspace{50mm}

\textbf{Written by:} \\
Miax \\
JustinOther

\vspace{10mm}

\textbf{Updated by:} \\
Name 1 \\
Name 2 \\
\ldots

\end{flushright}

\vspace{54mm}

\noindent\rule{\textwidth}{0.5pt}

\begin{center}
\small\textit{xEdit by \textbf{ElminsterEU}, updated by \textbf{Zilav}, \textbf{Hlp} and \textbf{Sharlikran}}
\end{center}



\newpage


\tableofcontents
\pagestyle{empty}								% Removes the page number in the table of contents.
\clearpage
\endgroup


\pagestyle{scrheadings}
\pagenumbering{arabic}
\setcounter{page}{1}





\section{Introduction} \label{Chapter_1_Introduction}
This document is intended as a training manual for the \xhref{http://www.nexusmods.com/newvegas/mods/34703}{FNVEdit} tool created by \xhref{http://forums.bethsoft.com/user/380528-elminstereu/}{ElminsterEU}. This manual contains a tour of FNVEdit, a lengthy FAQ/Navigator and several Chapters of detailed instructions on how you can utilize the varied functions of FNVEdit successfully to improve your gaming experience. JustinOther and I will take you on a guided-tour of the many functions that FNVEdit provides, and show you how to de-conflict groups of mods as well as improve the stability of your game and ensure the minimum of game-impacting conflicts. \vspace{3mm} \\
The questions answered and processes described herein are intended to help both mod-users and mod-authors to improve the quality, standardization and conformity of Fallout: New Vegas mods. If you utilize more than 25 mods in your Fallout: New Vegas game or if you write mods for Fallout: New Vegas, then using FNVEdit to resolve potential conflicts, clean mods and smoothen the loading process. With thousands of mods already created and thousands more on the way, it has become essential to standardize mod delivery and reduce conflicts where-ever possible.


\subsection{About This Document} \label{Chapter_1_1_About_This_Document}
This document presumes a basic understanding of what "Mods" are, and how to install them on your system. This manual is not a guide on how to build mods, and the use of FNVEdit for extensive mod changes is discouraged for most users - that's what the GECK was built for. \vspace{3mm} \\
This document is a work in progress, as I'm always uncovering some new function in FNVEdit that I didn't know about (the tool is 4+ years old now). ElminsterEU is also a prodigious coder that makes frequent updates to improve the quality of FNVEdit, and the documentation will be updated to follow suit. \vspace{3mm} \\
All feedback and comments about this guide should be directed to ElminsterEU, JustinOther or Miaximus on the Bethesda GECK Forums: \vspace{3mm}
\begin{center}
\xhref{http://forums.bethsoft.com/user/380528-elminstereu/}{ElminsterEU}, \xhref{http://forums.bethsoft.com/user/408976-justinother/}{JustinOther} or \xhref{http://forums.bethsoft.com/user/522202-miaximus/}{Miaximus}
\end{center}

\newpage





\section{Overview} \label{Chapter_2_Overview}

\subsection{Introducing FNVEdit} \label{Chapter_2_1_Introducing_FNVEdit}
"FNVEdit" is an advanced graphical module viewer/editor and conflict detector, with many additional functions that make it akin to a Swiss-army knife for modders and mod-authors alike. The primary function of FNVEdit is to help you spot conflicts between mods and resolve them, as well as to prepare your mod-list for a smooth run-time with \xnameref{Chapter_3_2_Master_Update_Mode}. \xhyperref{Chapter_3_2_Master_Update_Mode}{MUM} resolves some bugs with Fallout: New Vegas and improves mod compatibility during run-time by turning all mod files into Masters (ESM) and creating the special ONAM records that allow the mod files to work together smoothly. \vspace{3mm} \\
For the mod author FNVEdit provides the capability of viewing mod files at great depth, cleaning mod files of extraneous and duplicated records, merging mods together, changing ESPs to ESMs and scanning references in mod files for reach ability, form errors and specific references. These functions are very important to mod authors in the Fallout: New Vegas environment, as they will clean the mod of un-intended changes, erroneous records and potential conflicts with other mainstream mods that players run. \vspace{3mm} \\
Thus whether you use mods to enhance your Fallout: New Vegas experience or create mods for others to enjoy, using FNVEdit is both a wise investment in time and a beneficial act for the modding community. Authors who clean and prepare their mods with FNVEdit will experience fewer conflict and compatibility problems once published, and Players who \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{de-conflict} and MUMify their load-orders will be much less likely to experience crashes and head-aches. In general the use of FNVEdit can only improve the inter-operability of all mods, and this can only be a good thing. \vspace{3mm} \\
If I have not convinced you by now to invest an evening to learn how to use FNVEdit, then you should be sacked and have a live Nuka-grenade stuffed down your trousers. If however you wish to do the right thing by the modding community, grab a coffee and let's get to work! FNVEdit is not a difficult tool to use, but it does require that your CPU (brain) be involved in the process, and that is what this tutorial is designed to teach.
\newpage


\subsection{Acquisition and Installation} \label{Chapter_2_2_Acquisition_and_Installation}

\subsubsection{Downloading FNVEdit from Nexus} \label{Chapter_2_2_1_Downloading_FNVEdit_from_Nexus}

FNVEdit works on Windows XP, Vista and Windows 7, other platforms or Windows simulators may or may not work and are not officially supported. FNVEdit is available for download from Nexus, one of the most outstanding sources for Fallout3, Fallout: New Vegas and Oblivion content.

\begin{itemize}
  \setlength\itemsep{\CustomItemGap}
	\item \xhref{http://www.nexusmods.com/oblivion/mods/11536}{TES4Edit}
	\item \xhref{http://www.nexusmods.com/skyrim/mods/25859}{TES5Edit}
	\item \xhref{http://www.nexusmods.com/fallout3/mods/637}{FO3Edit}
	\item \xhref{http://www.nexusmods.com/newvegas/mods/34703}{FNVEdit}
\end{itemize}
The following page will display from the Fallout: New Vegas Nexus site. You will need to first click on, "Files" to display the list of FNVEdit versions. Once loaded, check the Version number in the upper-right corner (B) to ensure you download the most current revision (it may/will be different from the screenshot below, which is just an example). Then click on that revision of FNVEdit in the Mail Files section (C).

\begin{figure}[H]
  \centering
  \includegraphics[width=185mm, frame]{Images/001_Orig.\CFE}
\end{figure}
\newpage
\noindent
Once you download the program, you will need an archive extraction tool that can handle 7-Zip files (.7z), such as 7-Zip, which is available at: \url{http://www.7-zip.org/} \vspace{3mm} \\
Once the archive is open, you will need to extract the FNVEdit files into the right place in order for it to function. That place is the \path{Fallout: New Vegas\} directory, where the FalloutNV.exe program is installed. Do not install into the \path{Fallout: New Vegas\Data} directory or the program will not function correctly as shown below.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/002_Orig.\CFE}
\end{figure}
\noindent
Note: the FNVEdit package also contains a special file called, "FalloutNV.Hardcoded.keep.this.with.the.exe.and. otherwise.ignore.it.I.really.mean.it.dat". This file needs to be in the same folder as the FNVEdit.exe. It contains hardcoded, Fallout: New Vegas game engine records which will show up as false errors in FNVEdit if said file is absent. \vspace{3mm} \\
What makes these special is that the records are referenced in FalloutNV.ESM but are NOT contained in FalloutNV.ESM (they are in the binary). FNVEdit automatically loads FalloutNV.hardcoded.esp at the same load order index [00] as FalloutNV.ESM so that these hardcoded values can be used in conflict detection and resolution. You shouldn't touch this file until you're ready to un-install. \vspace{3mm} \\
The FalloutNV.hardcoded.esp simply needs to be in the same folder as the FNVEdit.exe. FNVEdit automatically loads FalloutNV.hardcoded.esp at the same load order index [00] as FalloutNV.ESM so that these hardcoded values show up as coming from, "FalloutNV.exe" while working in FNVEdit.
\newpage


\subsubsection{DirectX and Requirements} \label{Chapter_2_2_2_DirectX_and_Requirements}
With FNVEdit installed let's review some system parameters and drivers that you will need in order to successfully operate the tool. FNVEdit requires current DirectX drivers from Microsoft. You can tell if your system is up-to-spec by simply launching the tool. If FNVEdit loads and presents you with a Master/Plugin Selector view, your good to go but you can skip this next step. If you get an error about d3dx9\_*.dll not being installed, you need to update your DirectX to at least the March 2008 Version. \vspace{3mm} \\
The most current DirectX version can be found here: \\
DirectX End-User \xhref{http://www.microsoft.com/en-us/download/details.aspx?id=35}{Runtime Web Installer}: \vspace{3mm} \\
Or here: \\
DirectX End-User \xhref{http://www.microsoft.com/en-us/download/details.aspx?id=23611}{Runtimes Redistributable} (install it after unpacking it). \vspace{3mm} \\
Once DirectX is installed, you should be able launch the FNVEdit application successfully. If you still get errors, please report them to Miaximus or ElminsterEU.


\subsubsection{User Account Control} \label{Chapter_2_2_3_User_Account_Control}
The UAC Security feature of Vista protects the Program Files directory from un-authorized access. Unfortunately this also causes problems for FNVEdit and Fallout: New Vegas, and requires some manual intervention on your part to resolve. You have 3 options for dealing with UAC Security:

\begin{enumerate}
	\item Disable the UAC completely, but this will leave your system more vulnerable. (not recommended)
	\item Install Fallout: New Vegas and FNVEdit in the \path{C:\Games\Fallout New Vegas} folder, which is not controlled by UAC and will prevent conflicts. (recommended)
	\item Assign the "Users" group "Full Control" of the Fallout New Vegas folder in UAC, which will prevent UAC from causing problems.
\end{enumerate}
Any of the above options will work, though it is probably a better option to install Fallout: New Vegas and FNVEdit into \path{C:\Games\Fallout: New Vegas} directory and avoid the Program Files directory all-together. That leaves your system secure and averts the UAC problem for Fallout: New Vegas. \vspace{3mm} \\
If you are unable to get past the UAC restrictions, post the details of the problem to the Fallout New Vegas GECK forum for additional assistance. If all went well with the install, you should be able to successfully run FNVEdit.


\subsubsection{Starting FNVEdit} \label{Chapter_2_2_4_Starting_FNVEdit}
When started it will automatically find your Fallout New Vegas Data directory via the system registry (not by where it was installed). If you immediately get errors indicating that FNVEdit can't find the Fallout: New Vegas files, it means you moved the files to another directory after installing FNVEdit. You need to re-install the Fallout: New Vegas Game again and place it into whatever directory you want as part of the install process. \vspace{3mm} \\
If FNVEdit starts, you get a dialogue to select which modules you want to load with the current selection from your Plugins.txt as default value. This order will have been set by \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}, and cannot be changed in FNVEdit. If you need to change your load order, close FNVEdit and change the load-order in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}, then re-launch FNVEdit. \vspace{3mm} \\
Select the mods that you want to load into FNVEdit, which can be all (for conflict detection) or just one if you're working on a specific mod-file. Once you have confirmed that dialogue the selected modules will start loading in the background. Depending on your system it should take 30 seconds to a few minutes (!) for all modules to load. You can follow the progress in the message window. (Don't panic if it seems to freeze, it just takes time).
\newpage
\noindent
The tree view on the left side now shows all active modules in their correct load order. By navigating that tree view you can look at every single record in any of your modules. An example of a successful launch of FNVEdit is shown below, though you may also see additional error information if errors were found during start-up.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/003_Orig.\CFE}
\end{figure}
\newpage


\subsection{Tour of User Interface} \label{Chapter_2_3_Tour_of_User_Interface}
This section of the manual will take you on a brief tour of FNVEdit to introduce you to the different views and screens that you will be working with. This tour is designed for beginner-level users, and does not discuss the functionality of the views at any depth just yet. The tour is recommended for all levels of user, especially if you have not used FNVEdit within the last several months as there have been many updates.


\subsubsection{Master/Plugin Selection View} \label{Chapter_2_3_1_Master_Plugin_Selection_View}
The Master/Plugin Selection view is presented to you when FNVEdit is first launched, and allows you to select/un-select the mods that you want FNVEdit to load. You can also Right-Click in open space to access more options, such as "Select All" or "Select None".

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/004_Orig.\CFE}
\end{figure}
\noindent
To change the load-order of mods, close FNVEdit and open FOMM. Change the load-order as desired, close FOMM and re-open FNVEdit. There is an additional option you can use to quickly load a single mod - simply Double-Click on a mod file in the list. Double-clicking a mod will automatically un-select all other mod files, and will load the selected mod file. It's a short-cut to loading single mods.
\newpage


\subsubsection{Left-Side Panel} \label{Chapter_2_3_2_Left_Side_Panel}
The Left-Hand side of the main FNVEdit view is the most heavily used in FNVEdit, containing both a hierarchical data-tree structure for all references as well as the main context menu. It also contains a status bar and search boxes for hunting-down specific FormIDs or EditorIDs as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/005_Orig.\CFE}
\end{figure}
\noindent
The main context menu (B) contains all of the major FNVEdit functions, including Filters, Reference hunts, Error checking, Removing Extraneous content and many more. There are also several functions that do not apply to Fallout: New Vegas, such as Generate Object LOD. We will discuss each of the important options for Fallout New Vegas in the tutorials below.
\newpage


\subsubsection{Main Context Menu} \label{Chapter_2_3_3_Main_Context_Menu}
The main context menu is accessed by Right-clicking in the Left-Side Panel, and acts as the main navigation and function selection point for FNVEdit. As such, much time and explanation is provided on how to utilize this menu, as well as a Reference Chart (shown below) to help illustrate what each function does.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/006_Orig.\CFE}
\end{figure}
\noindent
There are some functions such as, "Generate Object LOD" and the "Set VWD for all REFR" options that only work on Oblivion, and should not be used with Fallout: New Vegas. With some functions you will be presented with additional options, while with others such as "Check for Errors", the output is sent to the \xhyperref{Chapter_2_3_4_Right_Side_Information_Tab}{Messages Tab} (or other tabs with other functions). \vspace{3mm} \\
Each of these functions is described in-detail within the tutorial, and Quick Links to those detailed sections can be found in the list below for easy-access. Additional description is provided below for each function on the main context menu.
\newpage

\begin{itemize} 
    \item[$\blacktriangleright$] \xhyperref{Chapter_6_7_Comparing_Two_Versions_of_a_Mod}{Compare To} - Loads another module at the same load order index as the one under the cursor when you right clicked. Works very well to compare 2 different versions of the same module against each other.
    \item[$\blacktriangleright$] \xhyperref{Chapter_4_3_Applying_Conflict_Filters}{Apply Filter} - This function will present you with the \xhyperref{Chapter_2_3_8_Filter_Menu}{Filter Menu}, where you can select options on how you want to filter (restrict) the data shown in FNVEdit.
    \item[$\blacktriangleright$] \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Remove Filter} - This function will remove the current filter, so that all loaded-data will be presented and processed.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_2_Building_Reference_Information}{Building Reference Info} - This function will build reference information for the currently select mod, which can be used after extensive changes are made.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_3_Building_Reachable_Information}{Building Reachable Info} - This function scans all references in a selected mod and will determine which are reachable (by the player in-game) from those that cannot ever be reached or accessed by the player. This function takes into account the totality of all loaded modules (looking only at the contents of the winning version of each record). So it's possible for the reachable status to be different for a record, depending on which other modules you've loaded.
    \item[$\blacktriangleright$] \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Checking for Errors} - This function is used to check for reports any case where the information in the module file does not match the FNVEdit record definitions. This is not a check for missing references, physical or data errors - that is done during the loading process with results available in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab}.
    \item[$\blacktriangleright$] \xhyperref{Chapter_5_4_Checking_for_Circular_Leveled_Lists}{Checking for Circular Leveled Lists} - Leveled Lists can reference other Leveled Lists, it's possible in this case to build a circular reference (with as little as 2 leveled lists directly referencing each other, or any number of additional leveled lists in the chain). When the game engine then tries to resolve that leveled lists down to a particular item/creature/NPC it can get caught in the endless loop and crash.
    \item[$\blacktriangleright$] \xhyperref{Chapter_6_3_Changing_Mod_FormIDs}{Renumbering FormIDs} - This function will re-number all references in a selected mod file, starting from a number that you specify. This function does not in any way resolve conflicts, and should be used only if you know exactly what you are doing (as it will result in incompatibilities with existing save games and any module which uses this module as a Master). This function was implemented for the BetterCities team, so that they could assign non-overlapping FormIDs to each of their city specific .esp's, to prevent the need for changing FormIDs when merging the city-specific esp's into the alternative "full" esp which contains all cities.
    \item[$\blacktriangleright$] \xhyperref{Chapter_5_2_3_Undeleting_and_Disabling_References}{Undeleting and Disabling References} - This function is used to un-delete any references in a selected mod file that were deleted in a previous edit, and instead mark them as "disabled". That will ensure that no conflicts occur if another mod depends on the object being deleted, and setting it to "disabled" will ensure that the original intent of the mod author (to remove the object from the game) is true as the player will never see a disabled object. More on this in the section on \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Mod Cleaning}.
    \item[$\blacktriangleright$] \xhyperref{Chapter_5_2_1_Removing_Identical_to_Master_Records}{Removing "Identical To Master" Records} - This function will remove any record in a selected mod file that is identical to a record in the Master files. This happens often when using the GECK, that some scripts or objects get marked as "modified" even though no changes were made. This bloats a mod file and makes it vulnerable to conflicts with other mods. More on this in the section on \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Mod Cleaning}.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_7_Applying_Scripts_Into}{Applying Scripts Into} - This function is used to apply a script(s) into a specific reference, and writes the resulting new or override records into the specified module.
    \item[$\blacktriangleright$] \xhyperref{Chapter_4_8_Creating_a_Merged_Patch_Automatic_Method}{Creating a Merged Patch} - This function is used to build the foundation of a merged patch-file, resulting in a new mod file using a name you select. More on this in the section on Mod Conflict Resolution.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_8_Deprecated_Functions}{Set VWD for all REFR with VWD Mesh in this file} - This function only works with Oblivion, and should not be used for Fallout: New Vegas mods under any circumstances.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_8_Deprecated_Functions}{Set VWD for all REFR with VWD Mesh copy as override} - This function only works with Oblivion, and should not be used for Fallout: New Vegas mods under any circumstances.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_8_Deprecated_Functions}{Generate Object LOD} - This function only works with Oblivion, and should not be used for Fallout: New Vegas mods under any circumstances.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_4_Changing_and_Adding_References}{Add (Reference)} - What exactly that menu shows you is depending on the context, if you right click on a file node you will get a list of all groups that don't exist yet, if you right click on a group you get a list of all records that can be added to it and so on. And yes, this can be used to add new records, so you can basically build a mod from scratch with it.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_5_Marking_Nodes_as_Modified}{Mark Modified} - It will mark the currently selected node and all child nodes as modified. To minimize the chance that FNVEdit breaks something that it doesn't fully understand when saving, only records that are marked as modified are assembled field by field, sub record by sub record. Any record or even complete group that is not marked as modified is simply copied unchanged as a blob of bytes from the old module file into the newly saved one.
    \item[$\blacktriangleright$] \xhyperref{Chapter_6_2_Adding_Master_Files_to_a_Plugin}{Add Masters} - This adds a new Master to the MAST sub record in the file header and correctly renumbers the FormIDs in the module. This function is also used to create an ESM/ESP pair from a single ESP plug-in.
    \item[$\blacktriangleright$] \xhyperref{Chapter_5_2_2_Sorting_Master_File_Load_Orders}{Sort Masters} - This function will sort the global load-order of Master files to match the order of global load order.
    \item[$\blacktriangleright$] \xhyperref{Chapter_5_2_4_Purging_unused_Master_File_References}{Clean Masters} - This function will scan a Plugin for Master ESM dependencies, determine if any Masters are un-used by the plug-in and remove them.
    \item[$\blacktriangleright$] \xhyperref{Chapter_8_6_Copying_and_Replicating_Idle_Animations}{Copy Idle Animations Into} - This function is used to copy all of the idle animations from one skeleton to another, which replicating monsters.
    \item[$\blacktriangleright$] \xhyperref{Image_Hide_Feature}{Hidden} - This function hides the selected mod file(s) or references from further view/processing by FNVEdit.
\end{itemize}
\newpage


\subsubsection{Right-Side Information Tab} \label{Chapter_2_3_4_Right_Side_Information_Tab}
The Information Tab holds a textural version of the FNVEdit help guide, including basic information on mod conflict resolution, instructions on using \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{Master Update Mode} and a legend on \xhyperref{Chapter_4_4_Color_Schemas_and_Display_Order}{how to interpret the color-scheme} of text and background. You can reference this tab at any time as a cheat-sheet of sorts on how to use FNVEdit.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/007_Orig.\CFE}
\end{figure}
\noindent
You can also capture any/all sections of the help information by Right-Clicking in the view-pane (A) and selecting one of the textural options presented to you.
\newpage


\subsubsection{Right-Side Messages Tab} \label{Chapter_2_3_5_Right_Side_Messages_Tab}
The Messages Tab acts like a running log-file of what FNVEdit is doing in response to your actions. When you first load FNVEdit, the Messages Tab is displayed by default so that you can watch the loading process in real-time. This is important as any Errors in the mod files such as missing references, missing files or dirty-edits to a mod file done in a hex-editor can all result in errors. Most of these will be harmless to Fallout: New Vegas, but some are lethal and you can see them all in the Messages Tab while they are loaded into FNVEdit. The view below shows an example:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/008_Orig.\CFE}
\end{figure}
\noindent
Any actions that you take which result in changes to the files such as saving, will also print their output into the Messages Tab. Thus it is important to check this tab often while working in FNVEdit, as there are cases in which a mod file won't save due to errors - and you want to know about that as soon as a problem occurs.
\newpage


\subsubsection{Right-Side References Tab} \label{Chapter_2_3_6_Right_Side_References_Tab}
The References Tab is used to locate all occurrences of a particular reference such as Soda Bottles, Projectiles and Explosions. If you select a reference in the Left-Hand window, every occurrence of that reference in the in the game is displayed.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/009_Orig.\CFE}
\end{figure}
\noindent
You can also Left-Click on any reference in the Referenced By view to present a copy/remove menu. Here you can literally delete the reference of the object out of the mod, or copy it into another mod (perhaps a patch plug-in, discussed in detail in the chapter on \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{Conflict Detection and Resolution}. These functions are especially useful for gaining a high-level understanding of what the mod contains, and where references can be found (a task which can be exceedingly difficult in the GECK). \vspace{3mm} \\
You can also double click entries in that list to directly jump to that record (and switch to the View tab), you can then use the backward button in the top right corner or on your mouse (if it got more than 2 buttons).
\newpage


\subsubsection{Right-Side View Tab} \label{Chapter_2_3_7_Right_Side_View_Tab}
The View Tab is used to display the details about any record that you click-select in the Left-Side Panel. The View Tab is where most of the work of conflict resolution takes place. Each mod that has a copy/version of a selected record is shown in the view with its own Column. This way, all of the mods that have a version of the same record can be shown side-by-side to more easily navigated and spot conflicts. The screenshot below high-lights details about the View Tab.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/010_Orig.\CFE}
\end{figure}
\noindent
We discuss this view at depth in the chapter on \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{Conflict Detection and Resolution}, but for now it's only important to understand its high-level function and how to navigate to it. As in the Referenced-By Tab, within the View Tab you can Right-click on any reference to receive an additional context menu. You can edit and remove any entry, as well as tell FNVEdit what kind of view you're looking for; with or without de-conflicted rows (rows without a conflict of any kind).
\newpage


\subsubsection{Filter Menu} \label{Chapter_2_3_8_Filter_Menu}
The Filter view is used for several purposes in FNVEdit; from conflict resolution to mod cleaning to reference viewing and reach ability data - all are achieved by activating a FNVEdit Filter. The Filters essentially work to restrict what data you see in FNVEdit to just what you want to see or are working on, and in some cases data is parsed (such as in conflict detection). When trying to \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{resolve conflicts among mods}, the Filter is used to show you only the records that show a conflict - leaving the un-conflicted rows invisible.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/011_Orig.\CFE}
\end{figure}
\noindent
As you can see there are dozens of different options you can select in the filter view. Not to worry though, we will give you the correct filter options to select for each of the functions you perform with FNVEdit. For now it is only important to recognize this as the Filter View, which gives you unprecedented viewing access to mods files. You can Apply and Remove Filters from the main context menu as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/012_Orig.\CFE}
\end{figure}
\newpage


\subsection{Saving and Confirmation} \label{Chapter_2_4_Saving_and_Confirmation}
You can save your changes at any time by pressing, "Alt" and "S", and when you exit FNVEdit (if there are changes to save). If you have not saved for a while, FNVEdit may also remind you that it's a good time to save.
When the, "Save changed files" window is presented, click on the mods you want to save. The screenshot below illustrates this process:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/013_Orig.\CFE}
\end{figure}
\noindent
The output of each save is available in the Right-hand Messages Tab. It is important to check this, as sometimes errors in a mod file can prevent you from successfully saving it.
\newpage


\subsection{Quick Tips and Shortcuts} \label{Chapter_2_5_Quick_Tips_and_Shortcuts}
There are several important keyboard short-cuts that can make your usage of FNVEdit more efficient with less key-strokes for some common functions.

\begin{itemize} 
    \item[$\blacktriangleright$] \textbf{Ctrl+S}                                                      \vspace{2mm} \\
                                 Opens the Save Files dialogue.                                       \vspace{3mm}
    \item[$\blacktriangleright$] \textbf{Ctrl+click on a FormID in the right side pane}               \vspace{2mm} \\
                                 Jump to the selected Record in the tree view.                        \vspace{3mm}
    \item[$\blacktriangleright$] \textbf{Double click on an entry in the Referenced By tab}           \vspace{2mm} \\
                                 Jump to the selected Record in the tree view.                        \vspace{3mm}
    \item[$\blacktriangleright$] \textbf{Press F2 with the mouse over a field in the right side pane} \vspace{2mm} \\
                                 Edit the field in the pane view immediately.                         \vspace{3mm}
    \item[$\blacktriangleright$] \textbf{Press F2 with the mouse over a record in the tree view}      \vspace{2mm} \\
                                 Edit the Form ID of the selected Record.
\end{itemize}

\newpage





\section{Master Update and Master Restore} \label{Chapter_3_Master_Update_and_Master_Restore}

\subsection{Overview} \label{Chapter_3_1_Overview}
Master Update Mode is the solution to the white-face bug and a number of older issues with mod conflicts. Master Update (MUM) is highly recommended for all modders, as it can prevent crashes, incompatibilities and may provide you with a smoother gaming experience. \vspace{3mm} \\
FNVEdit also provides the native ability to reverse the Master Update process, returning all MUM'ified plugins back to their original ESP state. This process is called Master Restore Mode (MRM), and will all you to edit your plug-in with the GECK. As the GECK will not allow you to set a Master (ESM) as the Active file, the MRM(er) process is required in order for you to modify your plug-ins again after running Master Update Mode. \vspace{3mm} \\
Thus in the tradition of UNIX nomenclature, you must first MUMify your plug-ins to play, and then MRMer at them to edit them in the GECK. This section describes both processes at depth.


\subsection{Master Update Mode} \label{Chapter_3_2_Master_Update_Mode}

Master Update Mode is activated by creating another copy of the program, and renaming it to, "FNVMasterUpdate.exe". When FNVEdit runs, it will recognize its filename and run in Master Update Mode accordingly. When Master Update Mode is activated, the following operations are performed without further user interaction:

\begin{itemize} 
    \item[$\blacktriangleright$] All modules in the Data folder are assigned into 2 groups, Masters and Plugins, based on their file extension (.ESM or .esp).
    \item[$\blacktriangleright$] The modules in each group are sorted by file modification date/time.
    \item[$\blacktriangleright$] All module files are re-dated, first all Masters, then all Plugins, in 1 minute intervals.
    \item[$\blacktriangleright$] All active modules are then loaded, the ESM flag set in the file header if not yet present, and the ONAM sub records build if required.
    \item[$\blacktriangleright$] Any temporary overriding world space record that has at least one previous version that is persistent is marked as persistent.
    \item[$\blacktriangleright$] All modified modules are saved.
\end{itemize}
This process will result in a better-integrated group of mods, and will likely result in less crashes than without having run Master Update Mode.
\newpage
\noindent
The process of creating the 2nd copy of FNVEdit for Master Update Mode is illustrated below:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/014_Orig.\CFE}
\end{figure}
\noindent
The same procedure can be used to create a "FNVMasterRestore.exe" version as well, both may be needed (especially for modders). When your ready to mod again, use FNVMasterRestore to remove the ESM flags from plugins that normally carry the .ESP filename extension.
\newpage
\noindent
The screenshot below shows you screenshots of a common setup, and the output of Master Update and Master Restore Modes:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/015_Orig.\CFE}
\end{figure}
\noindent
You must close the program to finalize and save the settings, or your MUM'ifcation will not be completed. Running Fallout: New Vegas with MUM open will cause problems, so make sure you close the program when you see the, "--= All Done =--" indication. \vspace{3mm} \\
It is recommended that you create icons for both MUM and MRM (alongside of the FNVEdit Icon) so that you can conveniently run either depending on whether you're playing or modding in the GECK. This is considered the best practice. \vspace{3mm} \\
You can safely delete the Backup files at any time; these are created for your protection. You can restore a mod from one of these backups simply by renaming the backup file to the original plug-in filename.
\newpage


\subsection{Master Restore Mode} \label{Chapter_3_3_Master_Restore_Mode}
There is also a MasterRestore mode which reverses the MUM process by removing the ESM flag again from all .esp files. Similar to Master Update Mode, you need to copy/paste the FNVEdit.exe. Program, and rename the new copy to, "FNVMasterRestore.exe". \vspace{3mm} \\
This will give you 3 icons; FNVEdit.exe, FNVMasterUpdate.exe and FNVMasterRestore.exe. Once you launch the Master Restore Mode (MRM), the rest of the action is automatic. The screenshot below illustrates the output of Master Restore Mode:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/016_Orig.\CFE}
\end{figure}
\noindent
You must close the program to finalize and save the settings, or your MUM'ifcation will not be completed. Running Fallout: New Vegas with MUM open will cause problems, so make sure you close the program when you see the, "--= All Done =--" indication.

\newpage





\section{Conflict Detection and Resolution} \label{Chapter_4_Conflict_Detection_and_Resolution}

\subsection{Overview} \label{Chapter_4_1_Overview}

One of the primary roles of FNVEdit is for conflict detection and resolution, so that multiple mods that modify the same records can work together successfully. Conflicts and Overrides are not always bad, and in fact the entire idea of "modding" is to make changes to the game that replace (and thus create a conflict or override for) the original records that came with Fallout: New Vegas. That is why our goal is to detect conflicts, determine their nature and resolve the bad conflicts while leaving good changes in place. \vspace{3mm} \\
The name of the game with Conflicts Resolution is load-order, as Fallout: New Vegas will count the last record loaded as the winner of any conflict between files. For example, two mods are added to the load-order; ModA and ModB. ModA changes the color of a standard lantern from a Neutral color to a Warmer color. ModB changes the radius of the same lantern by 50\%, making it brighter. If ModA loads before ModB, the changes made to the lantern by ModA get over-written by ModB (which still thinks the lantern has a Neutral color). This is a bad conflict, and overcoming them is the focus of this chapter. \vspace{3mm} \\
Negative or bad conflicts can also occur when mods make radical changes to the same world cell as the example below shows, while others can result in missing references, features in-game and even game crashes. The picture below is a poster-child example of how mods can fight over the same space and result in a bad change to the game:

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm, frame]{Images/017_Orig.\CFE}
\end{figure}
\noindent
Some conflicts are very apparent in-game such as in the example above, while others are hidden and only reveal themselves via crashes or when mods don't work right. In the worst case scenario Fallout: New Vegas will crash more often, sometimes constantly. These are the conflicts that we need to detect and resolve, while leaving the bulk of the good/intended conflicts and overrides left un-changed. We discuss the process in depth below.
\newpage


\subsection{Differences between Conflicts and Overrides} \label{Chapter_4_2_Differences_between_Conflicts_and_Overrides}

There is a huge difference between a "conflict" and an "override". There are mods which override changes from a Master file, such as changing the level cap. If for example, ModA changes the level cap to 40 from the default, this over-rides the level 20 cap in the Fallout: New Vegas Master files and is a normal. Overrides are not conflicting in any way. Overrides show up in FNVEdit with a Yellow background color and Green text color. In most cases you don't need to do anything with Overrides. \vspace{3mm} \\
To get a conflict you need to have the same FormID defined in at least 3 modules, a Master, and 2 overrides. The conflict arises when the two overrides change different aspects of the same record, so that when the mods are loaded by Fallout: New Vegas, the last-mod loaded overrides the changes of the first-mod. Thus the last loaded mod is the, "Conflict Winner" while the first mod, whose changes were overridden, is the, "Conflict Loser". Conflict Losers will show up with a red background, red text. The screenshot below illustrates the differences as seen in FNVEdit:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/018_Orig.\CFE}
\end{figure}
\noindent
In all this it's important to say, it's perfectly possible for 10 modules to override the same record without a single conflict, as long as the last loaded version of that record includes all the changes from the 10 other modules. That's what creating Patch Plugins is all about, and the process starts with applying a Filter.
\newpage


\subsection{Applying Conflict Filters} \label{Chapter_4_3_Applying_Conflict_Filters}
The application of Filters is the primary means of conflict detection for FNVEdit. When you apply a filter, the loaded mod data in FNVEdit is parsed and analyzed via a complex algorithm (described below) to detect all conflicts and overrides. The list of mods in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} changes color (text and background) based on conflict status of each, and the results are shown in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} which also changes color (text and background). The color-schema matches throughout FNVEdit, so you won't have to memorize more than one (described in detail below). \vspace{3mm} \\
To begin, Right-click in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} and select, "Apply Filter" as shown in Step 1 and 2 below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/019_Orig.\CFE}
\end{figure}
\noindent
The Filter window will now be presented, allowing you to check and un-check options according to the screenshot below (which are the settings for conflict detection).
\newpage
\noindent
In the example screenshot below of the Filter window, the options A-E are the Only options that should be checked, after which you can click, "Apply" (F) to start the filter.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/020_Orig.\CFE}
\end{figure}
\noindent
Once you click on Filter (F), FNVEdit will filter and analyze all of the loaded mods against the conflict-detection algorithm. This may take some time depending on how many mods you have loaded and how robust your computer is. The progress is shown in the upper-right corner of FNVEdit as the screenshot below illustrates:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/021_Orig.\CFE}
\end{figure}
\noindent
FNVEdit also keeps track of how long the filter takes to apply. If you run 100+ mods, it can take several minutes to process all of the data. Conflict detection is not simply based on the existence of multiple records for the same FormID in different modules but instead performs a comparison of the parsed sub-record data via an algorithm. \vspace{3mm} \\
As such the conflict detection process requires a lot of memory, and systems with less than 2 Gigabytes of RAM may suffer. If you receive an, "Out of Memory" error, then your computer does not have enough memory to process the number of mods you have chosen. Upgrade your computer or reduce the number of mods you run.
\newpage
\noindent
The screenshot below illustrates how FNVEdit will look once the conflict detection process is complete. Note the [Filtering done] block in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} below (A), indicating both the success of the conflict filtering process as well as record and time statistics about the filtration result. The screenshot below shows a typical outcome:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/022_Orig.\CFE}
\end{figure}
\noindent
The mods-list in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} changes as the filter adjusts the text color and background color based on conflict status. The \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} will show the actual conflicts, but only when you select on a record in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/023_Orig.\CFE}
\end{figure}
\noindent
With that you now understand how to detect for conflicts with FNVEdit and where to look at the data. You're now ready to learn about colors and display order. Understanding the color schemes behind the text and backgrounds is critical to understanding the conflicts, and how to resolve them.
\newpage


\subsection{Color Schemas and Display Order} \label{Chapter_4_4_Color_Schemas_and_Display_Order}
Understanding the color schema is a key to understanding FNVEdit. The color coding schema is designed to make the process as simple and efficient as possible. The legend below will introduce you to the basic color schema:

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm]{Images/024_Orig.\CFE}
\end{figure}
\noindent
The same color schema is used for the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} as well as in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{Right-Hand View Tab}, which shows the actual conflicts. This is done for consistency, with the text/background color of the left-hand mod-list determined by the conflicts in the right-hand window. There are many cases in which the status shows a conflict has occurred (red background), but that no action needs to be taken. \vspace{3mm} \\
There also is the case when a module contains a record that is identical to the Master (which is usually unintentional). If you have this module loaded alone the record will show up with a Green Background (signaling, no conflict) and Grey Text (identical to Master). Named, "dirty edits", these can be purged with the Mod Cleaning Process. \vspace{3mm} \\
The sample below shows both the color schema and the display-order together to better illustrate how conflict detection works. FNVEdit displays each conflict in the order that the files are loaded (\xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}'s load order), with the first mod loaded listed on the Left (Purple) and the last mod loaded listed on the Right (Orange).

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/025_Orig.\CFE}
\end{figure}
\noindent
All conflicts are ordered this way, with any mods loaded in-between either in a conflict state (Red) or that is identical to the Master (Grey) as described above.
\newpage
\noindent
The Load Order Workflow chart below is designed to help you understand the different color-combinations that you will encounter when de-conflicting mods. The FNVEdit display order as shown above was transposed into the vertical diagram below to help better illustrate how FNVEdit determines conflict winners and losers:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/026_Orig.\CFE}
\end{figure}
\noindent
As the chart above illustrates, the last-file loaded is always the conflict winner and ultimately determines what loads into Fallout: New Vegas. In this example \href{http://www.nexusmods.com/newvegas/mods/35155/?}{NV-Phalanx} got lucky that MyPatchPlugin mod shared the same Flagging, or they would have been conflict losers to the Flagging set by \href{http://www.nexusmods.com/newvegas/mods/35831/?}{Cuter Veronica}. However the Cuter Veronica mod is the conflict looser, and in this case we want Cuter Veronica to be the winner in terms of Hair and other body data. \vspace{3mm} \\
The next question is how do we fix it and resolve the conflicts?
\newpage


\subsection{The Conflict Resolution Process} \label{Chapter_4_5_The_Conflict_Resolution_Process}
Conflict Resolution is really a simple process that you repeat multiple times for each conflict in your load-order. It is also the point at which your CPU (brain) gets involved in the process, as determining the action to take for each specific conflict requires your input. There are really only four options available to us for conflict resolution:

\begin{enumerate}
	\item \ul{Do nothing at all} - Often time's conflicts are not harmful to the game and/or may not be something important-enough for you to care about.
	\item \ul{Change the Load Order} - where often times simply adjust the order in which the mods load can resolve the conflict to your satisfaction.
	\item \ul{Add the records to a patch plug-in} - for cases in which the mods are important and the conflicts can't be resolved with load-order.
	\item \ul{Remove one of the offending Mods} - if two mods simply cannot get along because of massive conflicts, one of them may have to go.
\end{enumerate}
Overall the best thing to do is change your load order or nothing at all if the conflict isn't concerning, as that require the least effort. Adding records to a patch plug-in where conflicts can't be resolved is the next step, and in most cases will resolve the conflict definitively. Very rarely will you need to un-load one of the mods. The process is illustrated in the figure below:

\begin{figure}[H]
  \centering
  \includegraphics[width=135mm]{Images/027_Orig.\CFE}
\end{figure}
\noindent
Several examples are provided below to illustrate this process with real mod data. The process above is intentionally designed to be as simple as possible, and after practice you will find that it goes very fast and becomes almost second nature.
\newpage
\noindent
In this example a record that has been selected in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel}, shows its detailed contents in the Right-hand \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab}, which includes all versions of the selected record from all modules which contain it. The right-most column (\xhref{http://www.nexusmods.com/newvegas/mods/35155/?}{NV-Phalanx}) is the module that loads first after the master, (\xhref{http://www.nexusmods.com/newvegas/mods/35831/?}{Cuter Veronica}) loads next and "MiaxPlayerHouse1" is last - which becomes the version of the record that Fallout: New Vegas loads into the game. The screenshot below illustrates an example of a conflict between mods:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/028_Orig.\CFE}
\end{figure}
\noindent
After clicking-open the FalloutNV.esm master and its Non-Player Character tree, we notice that Veronica has a conflict (red text, red background). By clicking on Veronica, the right-hand \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} gets populated with every mod that has a reference to Veronica, and sorts them by conflict winner. The right-most column (B) is the winner in all cases, which in our example means that the Cuter Veronica (C) mod wins-out over the NV-Phalanx mod (B). \vspace{3mm} \\
In this example Veronica?s hair color is conflicted. We see that FalloutNV.ESM sets the color to 24/16/7, but Cuter Veronica over-rides this and sets it to 118/49/7. However MiaxPlayerHouse1 over-rides this with the default values (probably un-intentionally). This conflicts with the change that Cuter Veronica is trying to make. Ultimately the conflict-winner is MiaxPlayerHouse (D), which sets the color back to 24/17/7 and leaves poor Veronica looking not as nice as she might. \vspace{3mm} \\
Also important to note in this example is the mods with Grey Text / Red Background with the NV-Phalanx mod - signifying that the record is identical to the FalloutNV.ESM Master file - and is thus redundant. \vspace{3mm} \\
In this case we do need to take action to resolve the conflicts, or Veronica will never see benefits of the Cuter Veronica mod. The question is, "Can we resolve this conflict by simply changing the mod load-order in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}?" Let's find out, start by closing FNVEdit and opening FOMM.
\newpage
\noindent
Changing the load-order in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} can often resolve conflicts. In this example, by dragging the \xhref{http://www.nexusmods.com/newvegas/mods/35831/?}{Cuter Veronica} mod below the MyPlayerHouse1 mod, we force Cuter Veronica to load last so it will be the conflict winner:

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/029_Orig.\CFE}
\end{figure}
\noindent
Closing FOMM (to save the load order), re-opening FNVEdit with the new load order and applying a conflict Filter yields the following results:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/030_Orig.\CFE}
\end{figure}
\noindent
Notice how on the left that Veronica's essential flag conflict is now resolved, because we swapped the load order so that Cuter Veronica came after \xhref{http://www.nexusmods.com/newvegas/mods/35155/?}{NV-Phalanx}. This worked because Cuter Veronica changed different things on Veronica that NV-Phalanx did, meaning there are no other conflicts. By forcing Cuter Veronica to load last, the conflict is effectively resolved because Veronica gets all of the flags that each mod intended for him.
\newpage


\subsection{Understanding Patch Plugins and Merged Patches} \label{Chapter_4_6_Understanding_Patch_Plugins_and_Merged_Patches}
There are two methods by which you can create a patch plug-in to resolve conflicts; by hand or using the automatic merged patch tool. The recommend best-practice with patch Plugins is that you use the automatic merged patch creation tool, after which you review the merged patch and add/remove/correct anything that the automatic tool did not change to your satisfaction. This is necessary because there is often not one "correct" answer to which mod should win a conflict over the same record, and sometimes what is normally deemed correct will not be to your personal liking. We describe the manual patch Plugin creation process first, and then show you how FNVEdit creates one automatically.


\subsection{Creating a Patch Plugin (Manual Method)} \label{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}
To create a patch plug-in, you must have already created your conflict detection filter (Section 4.3). To create the new patch Plugin, right-click on a conflicted record (A) and select, "Copy as override" (B). This will open the file selection window, where you can choose, <new file> (E) by either double-clicking it or by checking it's button and clicking, "OK". This will present you with a, "New Module File" window as shown on the next page, where you can select the name of your new patch plug-in.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/031_Orig.\CFE}
\end{figure}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{You can, "Copy as Override" into any mod as well as <new file>, but we highly recommend that you only modify your own mods!}
\end{itemize}
}
\vspace{-5mm}
\end{framed}

\newpage
\noindent
The New Module File window allows you to choose any name for your patch plug-in, after which you will be prompted to add the mod-name as a Master from which you copied the record. The screenshot below illustrates the process:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/032_Orig.\CFE}
\end{figure}
\noindent
Once confirmed, FNVEdit will add \xhref{http://www.nexusmods.com/newvegas/mods/35155/?}{NV-Phalanx} as the Master-file of your new patch plug-in. This happens because we chose the Veronica reference from NV-Phalanx when we did the, "Copy as override into". If we had chosen \xhref{http://www.nexusmods.com/newvegas/mods/35831/?}{Cuter Veronica} instead, it would set that as the Master file for our patch plug-in instead. This ensures that when you copy a reference into your patch plug-in, any data needed for it from the original mod file can be accessed by Fallout: New Vegas at run time. Once complete, you will see:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/033_Orig.\CFE}
\end{figure}
\noindent
Note how your new patch plug-in, "MyPatchPlugin.esp", has been created and now occupies the right-most column, making it the conflict winner. Also note that Cuter Veronica is now in conflict because the Essential flag has not yet been moved over, as well as the level-cap and quest key. Now that our patch Plugin has been created, we can correct all of the conflicts on poor Veronica (but does she Deserve it?!?)
\newpage
\noindent
We can now literally drag/drop each of these items into our new patch plug-in. We do this operation more than any other in FNVEdit when making a plug-in, as once the initial creation step is complete, it's simply a matter of dragging all of the overrides that we want into the patch plug-in as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/034_Orig.\CFE}
\end{figure}
\noindent
Note that for the key we dragged it from the top-level, "Item" entry for that record, and not from the key item row itself. The Item row is the root-level for this particular object (including its Count variable, etc.). As such FNVEdit will only let you "drag" from the correct row-level, so you don't have to worry about getting it wrong! The screenshot below shows the result, with the key now replicated into our patch plug-in.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/035_Orig.\CFE}
\end{figure}
\newpage
\noindent
The screenshot below shows the results, with the Essential flag now replicated into our patch plug-in. The last thing we need to do is correct the level-cap conflict with Broken Steel, so we can get Veronica up to the maximum ruthlessness. We can drag n' drop this from the Broken Steel Master entry, but instead let's illustrate the edit function. Simply right-click on the value in your patch plug-in (A) and select, "Edit" (B) as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/036_Orig.\CFE}
\end{figure}
\noindent
Once you select, "Edit", you will be presented with an Edit dialogue window, where you can type in the level that you want. Some fields will instead show you a list of Flags that you can check/un-check, all depending on what type of record you are editing. The last screenshot below shows the final result, with Veronica ready to kick some ass!

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/037_Orig.\CFE}
\end{figure}
\noindent
The merged-patch will produce a nearly crash-free game very quickly, but some subtle features of mods will inevitably not work. By manually patching and understanding each change, we can solve for these conflicts to our own satisfaction. Whether you retain the essential flag or remove it, is a player-by-player personal decision for what you want form your gaming experience.
\newpage
\noindent
The final step is to save your patch plug-in, so we don't lose all our hard work! The most convenient way is to hit, "Alt-S", which will present you with a save window as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/038_Orig.\CFE}
\end{figure}
\noindent
The, "Save Changed Files" view will present you with all of the mod files that have changed since the last save or boot up. This is handy, as you can un-check any files that you do not want to save, giving you finer control and ensuring you don't accidentally save a mod file that is not your own. Ensure that our, "MyPatchPlugin" is checked (A), and click, "OK" (B) to save your Plugin. \vspace{3mm} \\
You can get confirmation that the save was successful by clicking on the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} (C), where you will see a, "Done Saving" message. If there was any problem with the save, you would see an Error message instead.
\newpage


\subsection{Creating a Merged Patch (Automatic Method)} \label{Chapter_4_8_Creating_a_Merged_Patch_Automatic_Method}
FNVEdit provides an automatic method of generated a merged patch, which is the same as a patch Plugin but contains resolved conflicts from All of the loaded mods. This will greatly speed the conflict resolution process, as most of the common types of conflicts are automatically merged into the patch Plugin. It's very unlikely that the generated patch is going to be any worse than using the originally conflicting mods without the patch would be, and as such this method is recommended for everyone that runs mods. \vspace{3mm} \\
The whole point of using the automatic method is to generate a merged patch that is custom built for a specific load order (yours). However not every load-order conflict can be anticipated, and too often mod authors create messy plug-ins that create unforeseen outcomes. That's why it is important to review each of the overrides that the merged function creates. First thing is to apply a Conflict filter as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/039_Orig.\CFE}
\end{figure}
\noindent
The same filter options apply as when resolving standard conflicts:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/040_Orig.\CFE}
\end{figure}
\noindent
Once the conflict filter has completed its operation, we are ready to build our Automatic Patch Plug-in! This process will examine all of the loaded mods for certain form types that can be automatically merged into a patch plug-in. FNVEdit will create the new patch plug-in with all of the form types that it can safely merge for you, which you can then use as the base for your custom patch plug-in. \vspace{3mm} \\
This does not include all form types, and not even all cases of some form types. This is because FNVEdit cannot read your mind (future release) and thus does not know how to resolve many kinds of conflicts. Without the ability to read your mind, interpret the data and determine what you would want in all possible conflicts, this means that FNVEdit cannot fully automate the conflict resolution process. The automatic merged-patch then should be thought of as a foundation from which you resolve conflicts in your mod load order. The screenshot below illustrates the challenge:

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/041_Orig.\CFE}
\end{figure}
\noindent
As the screenshot shown above describes, there are many kinds of conflicts that cannot be resolved by an automatic merged patch. In this case the one conflict that can be resolved is that of Inventory Items, where one mod gives Veronica an item while another mod gives her different items. The conflict can be resolved by giving her the items from both mods in the merged patch-plug-in. For everything else in which a human decision is ultimately required, the merged patch will leave these records in conflict as we will see below.
\newpage
\noindent
To create the merged patch, Right-Click anywhere in the Left-Side panel to summon the context menu. From there select, "Create Merged Patch" to start the action:

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/042_Orig.\CFE}
\end{figure}
\noindent
This will open the "New Module File" name window where the name of the patch plug-in can be defined:

\begin{figure}[H]
  \centering
  \includegraphics[width=65mm]{Images/043_Orig.\CFE}
\end{figure}
\newpage
\noindent
The Merged Patch function should take several seconds to complete, after which the Messages Tab will reveal the outcome as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/044_Orig.\CFE}
\end{figure}
\noindent
Notice how the Merged Patch automatically creates our Patch Plugin, and assigns all of the mods in our load-order as Masters to it. This is important, as it allows you to drag'n'drop any record into it, and ensures maximum compatibility across your mod list. The screenshot above shows you how FNVEdit creates the entire record tree (1), and where the log file output is shown in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} (2).
\newpage
\noindent
The screenshot below shows you the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} of our newly-created merged patch, which you can see by selecting and clicking on a record from the tree:

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/045_Orig.\CFE}
\end{figure}
\noindent
As described above, the process of creating an automatic merged patch has only resolved one of the conflicts in the example by successfully giving Veronica new inventory items from several mods. However all of the other conflicts remain, which can now be resolved by dragging-dropping records into our new patch plug-in, fleshing it out with both the automatic data FNVEdit could find and your personal conflict resolution decisions. \vspace{3mm} \\
The examples provided above will give you a broad taste of the kinds of conflicts and overrides you will run into when creating a merged patch. Reviewing the changes can take as little as 10 or 15 minutes, compared to the hours of work it would take to create the patch plug-in by hand. That is why the recommendation is to use the Automatic method to create a merged patch, and then use your manual patching skills to correct any problems you find in the merged patch. That will produce the best patch plug-in for your mod-list, and ensure the smoothest gaming experience possible. \vspace{3mm} \\
Now it's time for you to take the reins and do some serious conflict resolution while the knowledge is still fresh in your brain. Take your own mod-list and create a merged patch just as described in this chapter, then manually de-conflict it. It will give you some real-world exercise in conflict resolution, and will help your own game at the same time!
\newpage


\subsection{The Conflict Detection Algorithm} \label{Chapter_4_9_The_Conflict_Detection_Algorithm}
To round-out our discussion on conflict detection and resolution, we have included the main algorithm (in textural, descriptive form) for your reference. You do not have to read this unless you have an interest in the internal mechanism of how FNVEdit determines a conflict/override from un-conflicted records. \vspace{3mm} \\
Note:  The Surgeon General has declared that reading code without a blood/caffeine content of 0.20 may be hazardous to your sanity. \vspace{3mm} \\
FNVEdit uses a complex algorithm that parses the mod sub-record data at depth, and performs a number of operations on the data to detect conflicts and overrides. While you do not have to memorize this, the main conflict-detection algorithm is described below for reference (and those brave enough to noodle it out):

\begin{enumerate}
	\item FNVEdit makes a list with all entries from the Master record, and designates this as the, "TargetList".
	\item FNVEdit Loops and repeats the following for each existing override record:
	\begin{enumerate}
		\item FNVEdit determines the file containing this override record, and designates it as, "CurrentFile".
		\item FNVEdit makes a list with all entries from that override record, and designates it as, "CurrentList".
		\item FNVEdit goes through the list of Master files for CurrentFile, from last to first, and stops when the first is found containing an override for this record, designated as, "CurrentMaster".
		\item FNVEdit makes a list with all entries from CurrentMaster, and designates it as "CurrentMasterList".
		\item FNVEdit goes over CurrentList and CurrentMasterList, for each entry that: \\
		      + Exists only in CurrentList, adds this entry to TargetList if not yet present. \\
					+ Exists only in CurrentMasterList, removes this entry from TargetList if present.
	\end{enumerate}
	\item FNVEdit then makes a list with all entries from the winning override record, and designates it as, "WinningList".
	\item FNVEdit then compares TargetList and WinningList, and if different:
	\begin{enumerate}
		\item FNVEdit copies the currently winning record as override into the new file, designated as, "TargetRecord".
		\item FNVEdit then removes all list entries from "TargetRecord".
		\item FNVEdit goes over TargetList and for each entry add a new entry to the "TargetRecord."
	\end{enumerate}
	\item FNVEdit then makes the Master List (as it applies to leveled list entries) which is also important to understand what's going on:
	\begin{enumerate}
		\item For each entry, FNVEdit generates a string representation including: Level, Reference, Count, Item Condition, Owner, and Owner Rank.
		\item FNVEdit sorts the generated list of strings.
		\item FNVEdit walks over the sorted list, add numbers to duplicated entries, and so suppose you have a list: A, B, B, C, D, D after this step it will be A\#0, B\#0, B\#1, C\#0, D\#0, D\#1.
	\end{enumerate}
\end{enumerate}


\newpage






\section{Mod Cleaning and Error Checking} \label{Chapter_5_Mod_Cleaning_and_Error_Checking}

\subsection{Overview} \label{Chapter_5_1_Overview}
FNVEdit provides several tools that help mod authors to clean their mods of extraneous / duplicated references, fix deleted references and to merge plug-ins together. These utilities can help a mod author avoid many conflicts with other mods and is considered a best practice. It is highly recommended that mod authors clean their mods before they are released to the general public, which can avert silly and embarrassing compatibility problems after release and make for a more professional showing in the community. \vspace{3mm} \\
Mod quality is a community wide problem and needs to be addressed on that level. If everyone just tweaks their load order around and cleans mods they installed that's not going to move us forward as a community. It is important that if there are general issues with a mod that these be made public and the author of the mod fixes them. With many of the possibly conflicting changes that a mod makes, it becomes a question of intent when cleaning them up, and only the mod author can give an authoritative answer to that. \vspace{3mm} \\
This chapter is really dedicated to mod authors, and can be safely ignored by mod-users (whew!). Mod Authors that use the GECK should realize that the GECK can set the modified flag on a thing very easily, and that gets saved into your mod as an override to some standard object. The problem comes when players integrate your mod with others that make intentional changes to the standard object that you inadvertently saved - which is the cause of more conflicts than any other kind between mods today.
\vspace{3mm}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Those not convinced by now to read-through and understand the mod cleaning and merging process are sloppy and should be sacked. For the honorable modders who want to contribute to the community in the right way, read-on.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}


\subsection{Mod Cleaning Process} \label{Chapter_5_2_Mod_Cleaning_Process}
What is the mod cleaning process anyway? The mod cleaning process involves cleaning a mod file of duplicate/unnecessary records and un-deleting objects in the Masters that were inadvertently deleted - setting them to disabled instead. We also check for errors as well as looped level lists. The itemized cleaning process is:

\begin{enumerate}
	\item Identifying and removing records in a mod file that is identical to those in the Master files, which user useless in a mod-file and can cause conflicts with other mods. Removing these from your mod file is a primary goal of this process.
	\item Identifying any records in the Master files which have been marked as deleted, which FNVEdit undeletes and marks as, "disabled" instead. This ensures that any change made to that object by other mods won't cause crashes or conflicts, which can happen if a modder accidentally deletes a base object, which is modified by another mod and you get a null pointer - poof!
	\item Identifying any infinite loops in the leveled-lists, and ensure there are no physical/data errors with the mod file to round-out the clean-up.
\end{enumerate}
For example, modder A inadvertently double-clicks on a wine bottle and it gets marked for save - becoming one of the changes introduced by modder A's plug-in. Modder A makes things worse by deleting the whiskey bottle record, removing it from the game! \vspace{3mm} \\
Mod B is added to the player's mod-list, which changes the wine bottle making it stronger. Mod A's plug-in however conflicts with this and can over-ride Mob B's changes without cause (as Mod A's author did not intend to change the wine bottle). Furthermore all occurrences of the whiskey bottle are now bogus. When Mod B tries to change the whiskey bottle, it finds no whiskey bottle to change and Fallout: New Vegas will crash.
\newpage
\noindent
Modder A could avoid both of these issues with the mod cleaning process, which un-deletes references that were deleted on accident and un-does inadvertent changes to things in the game that were not intended. The screenshot below illustrates the start of the process, in which you must load-up FNVEdit and follow the steps herein:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/046_Orig.\CFE}
\end{figure}
\noindent
Once, "OK" is clicked (D), FNVEdit will load the selected plug-in for cleaning. \vspace{3mm} \\
Note that you can also, "Select All" or "Invert Selection", which gives you additional controls over which mod-files are selected for loading into FNVEdit. For the mod cleaning process, we only want to load the plug-in being cleaned. You can do this using the, "Select None" menu option, and then clicking on the mod file to be cleaned. \vspace{3mm} \\
You should only clean one mod file at a time, and you should not clean other people?s mod files! There is no harm in running through the process to see if mod A or mod B is filled with dirty edits (after which you can send them a PM on the forums!), but it is considered a bad idea to clean other people's mods.
\newpage
\noindent
Once loaded into FNVEdit, we need to apply a Filter to detect all of the Identical to Master references in the mod being cleaned as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/047_Orig.\CFE}
\end{figure}
\noindent
Clicking on, "Apply Filter" (B) will present the Filter window, just as it did with the \xhyperref{Chapter_4_5_The_Conflict_Resolution_Process}{Conflict Resolution Process}. This filter window however will utilize different options than with conflict detection, as in this case we are only looking at one mod file and one specific kind of conflict - the Identical to Master references. \vspace{3mm} \\
The options to select for Mod Cleaning are:

\begin{enumerate}
  \setlength\itemsep{\CustomItemGap}
	\item By conflict status for this particular record
	\item Identical to Master
	\item Conflict status inherited by parent
\end{enumerate}
\newpage
\noindent
The screenshot below illustrates the filter options to select:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/048_Orig.\CFE}
\end{figure}
\noindent
Clicking on, "Filter" (D) will launch the FNVEdit analysis for Identical to Master records, which should complete in a short period of time (perhaps 1-20 seconds). If your system is very slow or bogged down or the mod is really huge, it is possible for the process to take longer. The status of FNVEdit can be viewed in the upper-right corner of the screen, as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/049_Orig.\CFE}
\end{figure}
\noindent
Both the elapsed time and processed records are shown in the upper-right window. When FNVEdit completes the analysis, the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} will reveal the result as shown on the next page. You should also not expect to see in anything yet in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab}.
\newpage
\noindent
The output of the filter can be seen in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/050_Orig.\CFE}
\end{figure}
\noindent
The total number of records filtered and the elapsed time are given, which should be quick. Also note the Yellow/Green text and backgrounds in the screenshot above, which are the references to be cleaned out. \vspace{3mm} \\
The records to be cleaned will be shown in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab}, though at first you won?t see anything in the view. This is because the default setting for the View Tab is the, "Hide no conflict rows", which means any rows that don't have a conflict are normally not shown (as they play no role in conflict resolution, they are not conflicted!). The screenshot below shows you the simple operation you can perform to see the records that need cleaning:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/051_Orig.\CFE}
\end{figure}
\noindent
Once you un-check the, "Hide no conflict rows" setting in the View Tab, you will be able to see all of records just as you do during conflict detection.
\newpage
\noindent
Note the grey text with green background in the mod we are cleaning; indicating that they are identical to the Master versions of the same record and should be removed (cleaned). These are often called, "dirty edits".

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/052_Orig.\CFE}
\end{figure}
\noindent
A simple visual inspection between the FalloutNV.ESM and \xhref{http://www.nexusmods.com/fallout3/mods/867/?}{BetterCaravans} mod reveals the duplicated records that really don't need to be in the BetterCaravans mod at all. Removing these will have no negative impact on the mod or Fallout: New Vegas. The process of removing the duplicated, "identical to Master" records involve applying a slightly different filter to the mod, followed by several context menu options as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/053_Orig.\CFE}
\end{figure}


\subsubsection{Removing "Identical to Master" Records} \label{Chapter_5_2_1_Removing_Identical_to_Master_Records}
Clicking on the, "Apply Filter" button from the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel's} context menu will present the Filter window once again. This time choose the Mod Cleaning settings as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/054_Orig.\CFE}
\end{figure}
\noindent
As before the status of the filtering process is shown in the upper-right menu bar, and once complete the logfile output is shown in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab}. This filter will load only the data that needs to be cleaned from the mod. The screenshot below again shows how the output may look from this step - which should take just a few seconds:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/055_Orig.\CFE}
\end{figure}
\newpage
\noindent
With the Mod Cleaning filter applied, Golly! It's time to get out the Mr. Clean and make this puppy sparkle with goodness! Grab the mop by Left-clicking on the mod that you want to clean, in our case \xhref{http://www.nexusmods.com/fallout3/mods/867/?}{BetterCaravans} (A). Splash the Mr. Clean on by Right-clicking the shiny white space beneath the mod your cleaning (B), and spin that mop into action by clicking on, 'Remove "Identical to Master" records' (C) - and watch as FNVEdit puts the shine on that puppy!

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/056_Orig.\CFE}
\end{figure}
\noindent
You will be presented with the Warning screen, press, "Yes" when prompted:

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm, frame]{Images/057_Orig.\CFE}
\end{figure}
\noindent
As FNVEdit completes the mod-cleaning process, you can see the output in the Messages Tab, which shows you every record that is being removed along with its hex ID number. Once complete, you get a line of text reading, [Removing "Identical to Master" records done] - along with statistics on the number of records processed and removed as well as the elapsed time (A).
\newpage
\noindent
The screenshot below illustrates the output:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/058_Orig.\CFE}
\end{figure}
\noindent
The final output is also printed in the bottom status bar (B) for your viewing pleasure. With this, the first step in the mod cleaning process is complete.


\subsubsection{Sorting Master File Load Orders} \label{Chapter_5_2_2_Sorting_Master_File_Load_Orders}
There are times in which the load-order of Master files gets switched around when you add/change load orders. It can become a problem when the Master load order becomes different then how they are listed in the Master List, header section of your Plugin. The, "Sort Masters" function corrects the Master file load order in the Plugins Master List, and correctly renumbers all file specific FormIDs. The screenshot below illustrates:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/059_Orig.\CFE}
\end{figure}
\noindent
There is no specific log-output from the function unless there is a problem. If you see no issues or errors in the Messages Tab, then the function sorted the Masters correctly.
\newpage


\subsubsection{Undeleting and Disabling References} \label{Chapter_5_2_3_Undeleting_and_Disabling_References}
The next step in the cleaning process is to Undelete and Disable References from the mod being cleaned. The, "Undelete and Disable References" function scans through the mod and the Master files it depends upon, looking for any records that you may have deleted by accident. If it finds some, it will un-delete them and then set the reference to, "disabled" so that it will never be seen in-game nor affect your mod. \vspace{3mm} \\
This ensures that if another mod tweaks/changes the item you deleted, that the item will still be in the files (just disabled), and thus won't cause Fallout: New Vegas to crash. If your mod file loads with the item deleted and another mod tries to change it, Fallout: New Vegas will crash! These are among the more serious conflicts that can occur and the reason why it is important for mod authors to run this function as part of the mod cleaning process. The screenshot below illustrates how to activate it:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/060_Orig.\CFE}
\end{figure}
\noindent
Note that you must Right-click on the mod in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} to pull the right context menu. In this case you do not want to click on open-space. \vspace{3mm} \\
The screenshot below shows the results, which show the log-file output in two places (A and B) in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} and on the lower status bar:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/061_Orig.\CFE}
\end{figure}
\noindent
Now we know for sure that other mods will not run into missing references that were a consequence of changes made in the mod your cleaning. With the second step in the cleaning process complete, it's time for the final step.
\newpage


\subsubsection{Purging un-used Master File References} \label{Chapter_5_2_4_Purging_unused_Master_File_References}
Master File References are links or references from your Plugin to any Master files (ESMs) that it depends on to run, and stores the list in a record called, "MAST". Most mods have FalloutNV.ESM in their Master List, but you can have many such links in a plug-in. In fact when FNVEdit creates a \xhyperref{Chapter_4_8_Creating_a_Merged_Patch_Automatic_Method}{Merged Patch}, it puts links to many or nearly-all of the Master files in your mod list. It is possible in some cases for a Plugin to contain a link to a Master file that it does not need. \vspace{3mm} \\
For example, suppose the Plugin we are cleaning had MasterB.ESM in its Master List but it doesn't contain any overrides for, or makes any other references to, records from MasterB.ESM. In that case we would not need nor want MasterB.ESM listed in the Master record for our Plugin! This function detects any un-used Master references in the Plugin we are cleaning, and removes them from the Master List. FNVEdit also renumbers any file specific FormIDs in the Plugin to ensure that it is cleaned properly. \vspace{3mm} \\
The screenshot below illustrates how to activate the, "Clean Masters" function:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/062_Orig.\CFE}
\end{figure}
\noindent
Unfortunately there is no log-file output for this function, so you'll have to trust me that this works correctly. \vspace{3mm} \\
The screenshot below illustrates how the \xhref{http://www.nexusmods.com/fallout3/mods/867/?}{BetterCaravans} mod looks now that it's clean, with its new sparkly (bold)-Green text in both the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} (B) and the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} (A):

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/063_Orig.\CFE}
\end{figure}
\noindent
At this point you should save your mod and load it up in-game to make sure that everything is still happy. There are a few notes about the process to be aware of:

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{You should not clean other people's mods! It is the responsibility of each mod owner to clean their own mods, and with the creation of this tutorial there is no longer any excuse why people can do this. If you find a dirty mod, send the mod author a PM on Nexus and tell them they have a dirty mod and reference them to FNVEdit (please?)}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Make sure that you run Master Update again before testing your mod in-game, as the cleaning process will undoubtedly change references and you want to make sure FNVEdit synchs everything up. This has shown to prevent crashes.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage


\subsection{Checking For Reference Errors} \label{Chapter_5_3_Checking_For_Reference_Errors}
The "Check for Reference Errors" function reports any case in which the information contained in a module file does not match the FNVEdit record definitions. There is a very minimal chance that something that's reported as an error is actually an oversight in the FNVEdit record definitions and not in the module, but all cases should be reported to be safe). Note that there are errors in the FalloutNV.ESM and the DLCs. Both \xhref{http://forums.bethsoft.com/user/380528-elminstereu/}{Elminster} and \xhref{http://forums.bethsoft.com/user/20313-quarn/}{Quarn} have gone through them all to ensure they are genuine errors. Running the check is a recommended practice as part of the mod-cleaning process as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/064_Orig.\CFE}
\end{figure}
\noindent
When the error-check is complete, the screenshot below shows you how the output will look when errors are found in a module:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/065_Orig.\CFE}
\end{figure}
\noindent
In this example we found both kinds of errors (Ouch!), which was ideal for our tutorial. In the first case FNVEdit found reference errors where data is missing such as Flags and Idle Timer Settings (A). These errors should be corrected by the mod author and not by you! The error we see in (B) is the result of an unknown Flags type, (Unknown: 15), which FNVEdit did not understand. These kinds of errors should be sent to Elminster for to ensure FNVEdit has the right information, or if the mod has some strange error.
\newpage


\subsection{Checking for Circular Leveled Lists} \label{Chapter_5_4_Checking_for_Circular_Leveled_Lists}
With mods it is possible to have Leveled Lists that reference other Leveled Lists that are perfectly valid. However, it's possible in some cases that a mod builds a circular reference (with as little as 2 leveled lists directly referencing each other, or any number of additional leveled lists in the chain). When the game engine then tries to resolve that leveled lists down to a particular item/creature/NPC, it can get caught in the endless loop and crash. This function looks for such cases and identifies them if they exist:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/066_Orig.\CFE}
\end{figure}
\noindent
I have not yet found an example in any mod of such a circular leveled list, but I do know that they exist and that FNVEdit can spot them. If you don't get any output from running this function, then the checked mod is clean of such loops.

\newpage





\section{Managing Mod Files} \label{Chapter_6_Managing_Mod_Files}

\subsection{Overview} \label{Chapter_6_1_Overview}
This chapter is dedicated to mod authors and describes a number of FNVEdit functions which make mod authors' lives easier and lend a degree of uniformity to their work. Much like the material covered in the \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Mod Cleaning and Error Checking} chapter, these functions help mod authors refine their plugins in order to make them less conflict prone when used with other mods. Actions like merging mods, splitting them into Plugin/Master pairs, adding Master file references and more are documented in this chapter, all functions which can open doors to new possibilities which mod authors may have not known existed.

\subsection{Adding Master Files to a Plugin} \label{Chapter_6_2_Adding_Master_Files_to_a_Plugin}
In order to allow a Slave.esp to add new, merge ready, forms (by injection) to Master.ESM or to allow Slave.esp to reference and/or change (by override) Master.ESM native forms, Master.ESM must be included within Slave.esp's Master List (MAST) found within the Slave.esp's File Header. Master.ESM's inclusion in Slave.esp?s Master List is as Slave.esp's key to draw from an otherwise inaccessible resource. FNVEdit is able to readily add new Master(s) to modules' MASTs and, when using the "Add Masters" feature, will correctly renumber the FormIDs in the module to ensure no two forms have the same FormID(s) post-reload. This can be very handy tool for mod authors as it whittles the process down to a few mouse clicks that the author can focus on other, more important things. \vspace{3mm} \\
In this example we showcase \href{http://www.nexusmods.com/fallout3/mods/5178/?}{Saiden Storm's Weapon Effects} mod and the taylorsd's \xhref{http://www.nexusmods.com/fallout3/mods/503/?}{Better Frag Grenade Physics} mods, two excellent enhancements to Fallout: New Vegas. Here we will add the SS Weapon Effects.ESM Master file to the Better Frag Grenade Physics plugin, so that we can add one of Saiden Storm's cool plasma blasts to a frag grenade for kicks! To start the action, select "Add Masters" from the context menu as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm, frame]{Images/067_Orig.\CFE}
\end{figure}
\newpage
\noindent
This will present the File selection menu, from which you can Check the Master file(s) that you want to add as references in the Plugin's header as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=80mm]{Images/068_Orig.\CFE}
\end{figure}
\noindent
Once FNVEdit adds the Master file as a reference in the Plugin, you see results similar to the screenshot below showing the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} log-entry:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/069_Orig.\CFE}
\end{figure}
\noindent
Note that "SS Weapon Effects.ESM" has now been added to RealFragGrenade3.esp, making it possible to attach one of \href{http://www.nexusmods.com/fallout3/mods/5178/?}{Saiden Storm's Weapon Effects} explosions to the grenade effect in \xhref{http://www.nexusmods.com/fallout3/mods/503/?}{Better Frag Grenade Physics}. The View Tab shows the specific entry:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/070_Orig.\CFE}
\end{figure}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{If you plan to release a mod to the public, then you should ONLY do this with permission from the mod author, in this case Saiden Storm. If you wanted to use his weapon effects in a mod of your own and release it, you need permission!}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage
\noindent
Below \xhref{http://forums.bethsoft.com/user/380528-elminstereu/}{Elminster} describes why this function is important for mod authors wanting to add Master file references to their own mods: \vspace{3mm} \\
With FormIDs it's important to realize that the FormIDs that FNVEdit shows you are NOT the ones that are actually written into the module file. The FormIDs that FNVEdit shows you are load order corrected ones, while the FormIDs in the file itself are file specific ones. FormIDs are made up of 2 parts, the first byte (2 characters) is the module index, the last 3 bytes (6 characters) are the module specific ID. Mapping from file specific to load order corrected FormIDs and back only affects the "module index" and leaves the module specific ID untouched. \vspace{3mm} \\
An example: \vspace{3mm} \\
Suppose you got a bunch of modules loaded: \vspace{3mm} \\{}
[00] FalloutNV.ESM  \\
...                 \\{}
[04] MasterA.ESM    \\
...                 \\{}
[10] MasterB.ESM    \\
...                 \\{}
[15] MasterC.ESM    \\
...                 \\{}
[20] Plugin.esp \vspace{3mm} \\
And let's suppose the MAST sub record in the File Header of Plugin.esp lists: \vspace{3mm} \\
FalloutNV.ESM  \\
MasterB.ESM    \\
MasterA.ESM    \vspace{3mm} \\
If you now see a record in Plugin.esp that overrides a record from FalloutNV.ESM, then you would see a FormID like 00123456 for it. In this particular case that record would also have the same (00123456) FormID inside the Plugin.esp module file. \vspace{3mm} \\
But if you have a record that overrides a record from MasterA.ESM, e.g. with a FormID like 04ABCDEF (you can see the 04 as module index matches the load order of MasterA.ESM) then it would be saved as 02ABCDEF in the Plugin.esp module file, because 02 is the index of MasterA.ESM in the list of Master files in the File Header of Plugin.esp. \vspace{3mm} \\
And an override for a record in MasterB.ESM (e.g. 10654321) would be saved as 01654321 in the Plugin.esp module file because 01 is the index of MasterB.ESM in the list of Master files in the File Header. \vspace{3mm} \\
Last but not least, a NEW record in Plugin.esp which belongs to Plugin.esp and which FNVEdit would show you e.g. as 20FEDCBA gets stored as 03FEDCBA in the file (because 03 is equal to the number of entries in the Master List, as indices into that list start at 00, 03 is one higher than the highest valid index into that list).
You will also notice that it's not possible to have an override record for a record from Master3.ESM in Plugin.esp or in any other form reference such a record, because there is no way to map a load order corrected FormID of 15A1B2C3 to a file specific one that's valid in Plugin.esp. \vspace{3mm} \\
To reference a record from Master3.ESM in Plugin.esp you need to add Master3.ESM to the Master List in the File Header of Plugin.esp. But if you just go there and do that manually, then you've just added Master3.ESM with the index 03 to the file. This means that all the records that used to belong to Plugin.esp are suddenly considered override records for records from Master3.ESM and will show up with 15xxxxxx FormIDs instead of 20xxxxxx FormIDs, a real mess! \vspace{3mm} \\
If you instead use the Add Masters function, then FNVEdit will not only add then new entry into the Master List, it will also renumber all (file specific) 03xxxxxx FormIDs into 04xxxxxx FormIDs first to preserve their meaning (which is "this record belongs to this file"). \vspace{3mm} \\
There are rare cases when editing the master list directly is what you actually want. e.g. when splitting an .esp into an .ESM/.esp pair. In that case you would make a copy of the .esp, rename it to .ESM, load it alone into FNVEdit to set the ESM flag in its header, then restart FNVEdit to load both the .ESM and the .esp and modify the MAST sub record in the File Header of the .esp by adding the .ESM as last entry. After restarting FNVEdit and loading both files you will see that all records in the .esp are now considered overrides for the same records from the .ESM"


\subsection{Changing Mod FormIDs} \label{Chapter_6_3_Changing_Mod_FormIDs}
There are times in which you may need to renumber the FormIDs for all records in a plug-in to avoid conflicts. This can become necessary if two plug-ins share the same FormIDs (or some of them), which can result in bad conflicts in-game. Renumbering FormIDs from will change all FormIDs of records belonging to the Mod-file (but not any override records which might be contained in that mod file) so that they start at the specified value. \vspace{3mm} \\
This Function is useful if you have multiple modules that you plan to update in the future, but also want to always provide a merged version (e.g. using FO3Plugin). By assigning non overlapping FormIDs to the different modules, you can make sure that no FormID reassignment of conflicting FormIDs has to take place when merging. \vspace{3mm} \\
To renumber the FormIDs of a Mod file, Right-click on that mod's title in the left hand panel in order to present the main context menu (A). Then select, "Renumber FormIDs from\ldots" from the menu as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/071_Orig.\CFE}
\end{figure}
\noindent
When selected, the function will present a, "Start from\ldots" window asking you what number you want to start the renumbering at as shown below.
\newpage
\noindent
Normally a FormID is 8 characters long, with the first 2 representing the mod file's index and the last 6 the reference?s specific index within that specific mod. Thus pick a number between 100000 and FFFFFF in hex:

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/072_Orig.\CFE}
\end{figure}
\noindent
Once the new module specific start FormID (in hex) has been input (A) and the OK button selected (B), FNVEdit will begin changing the FormIDs and present the output in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/073_Orig.\CFE}
\end{figure}
\noindent
When changing the FormIDs of a huge mod like \xhref{http://www.nexusmods.com/fallout3/mods/5370/?}{Reykjavik} by Alexander Sigursson, the process took 3-4 minutes on a high-end computer. The results shown in the Messages Tab reveal just a few examples of FNVEdit renumbering a FormID, discovering all references to it in all mod files, and correcting the numbering to prevent conflicts.

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Changing the FormIDs of an existing module will make it SaveGame incompatible and will break any other module that uses this module as Master! If you have any dependent modules, you need to have them all loaded into FNVEdit at the time you change to FormIDs so that they will all be updated accordingly.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage


\subsection{Merging a Plugin into another Plugin or Master} \label{Chapter_6_4_Merging_a_Plugin_into_another_Plugin_or_Master}
Many mod authors and users alike encounter the need or desire to merge modules. Many like to merge their favorite plug-ins into a single master file or multiple consolidated plugins. One anonymous modder affectionately calls their conglomerate module "[BORG].ESM (Best Of Really Great Enigmatic Super Mods)". FNVEdit can be used to merge any number of plugins and, if used properly, will ensure that the resulting plugin is synchronized correctly against its combined references and that the merged content will function properly. \vspace{3mm} \\
In this example, we're going to merge Enterprise.esp and KlingonVessel.esp into [BORG].ESM. Note that any number of mods can be merged in one FNVEdit session as one desires, but it is best to merge them a few at a time. Firstly, we load up \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} and order the files to ensure [BORG].ESM is loading \textit{before} the plugins it is to assimilated.

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/074_Orig.\CFE}
\end{figure}
\noindent
Load order is very important when merging mods together, primarily because FNVEdit, the GECK, and the game engine are very particular regarding the numbering of Forms' IDs and the references to them amongst modules. It is easy to end up with multiple forms bearing the same FormID(s) when merging downward, that is, by copying records into a file loaded after the plug-in(s) to be assimilated. By merging upward, as will be demonstrated in this lab, all forms to be merged into [BORG].ESM will first be assigned new, [BORG].ESM FormIDs such that each form will invariably have a unique ID. After closing FOMM and load things up in FNVEdit, you will find the plugins are listed in the same order as you have set them up in FOMM.

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm]{Images/075_Orig.\CFE}
\end{figure}
\noindent
Once all has loaded, we must add [BORG].ESM to the master lists of Enterprise.esp and KlingonVessel.esp. R-Click Enterprise.esp in the left pane and select "Add Masters". This will prompt a window which will allow the addition of [BORG].ESM to Enterprise.esp?s master list as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm]{Images/076_Orig.\CFE}
\end{figure}
\noindent
Repeat the process and only add [BORG].ESM to KlingonVessels.esp's master list. Now that both mods to be merged have [BORG].ESM as a master, we can perform the next phase of the merge.

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm]{Images/077_Orig.\CFE}
\end{figure}
\noindent
The FormIDs of all forms native to and to be assimilated from both Enterprise.esp and KlingonVessel.esp must be altered to allow their addition to [BORG].ESM. Since all Enterprise.esp and KlingonVessel.esp native forms begin with 02 and 03 respectively, they cannot be copied as they are into their new master. To get around this, we will inject said native forms into [BORG].ESM by assigning them new IDs starting with 01. It is important to realize that a form merely having an ID starting with 01 does not necessarily mean it is merge-ready as it might reference other forms with out of range load indexes. To proactively avoid errors while merging, it is best to change all FormIDs before copying/merging any records.
\newpage
\noindent
While changing FormIDs, it is best to change as many at a time as possible via multi-selection of records. When doing so, all references to the records being changed will be automatically updated by FNVEdit, ensuring the inter-referential structures remain intact and that all of the puzzle pieces line up, so to speak. In the left panel, select Enterprise.esp and press "$\ast$" to expand all of its branches (A below). \vspace{3mm} \\
We'll work from the top down and begin with the CELL group which can, in this case, demonstrate FormID changing of multiselected records. Multiselect (Ctrl+click) both EnterpriseBridgeCELL and EnterpriseReadyRoomCELL via Ctrl+Click. Then R-Click either cell record and select "Change FormID" as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/078_Orig.\CFE}
\end{figure}
\newpage
\noindent
Choose [BORG].ESM as the target plug-in.

\begin{figure}[H]
  \centering
  \includegraphics[width=85mm, frame]{Images/079_Orig.\CFE}
\end{figure}
\noindent
Now that the cells' FormIDs begin with 01, let's move on to their contents. Some record types, namely REFR, ACRE, ACHR, NAVM, PGRE, PIMS, and INFO, are referred to as "children" because they are invariably contained within "parent" forms such as a CELL or DIAL. Multiselect, via highlighting, all of the "Persistent" and "Temporary" cell children, R-Click them, select "Change FormID", and select [BORG].ESM again. \vspace{3mm} \\
Sometimes, multiselection of records is not applicable and changing the FormID of a single record is necessary. We can demonstrate this by observing Enterprise.esp's Dialog Topic group as EnterpriseDIAL is the only record of its type needing a FormID change.

\begin{figure}[H]
  \centering
  \includegraphics[width=85mm, frame]{Images/080_Orig.\CFE}
\end{figure}
\noindent
In this case, we're going to inject the children first, then the parent. Multiselect the INFO records, then change their FormIDs in the same manner as described above. Note that those six INFO records are assigned sequential FormIDs, the last being 01001D89. Knowing there is a pattern, we can determine 01001D9A is available. R-Click EnterpriseDIAL, select "Change FormID", then manually enter 01001D9A. The Dialog Topic group is now completely injected.

\begin{figure}[H]
  \centering
  \includegraphics[width=85mm, frame]{Images/081_Orig.\CFE}
\end{figure}
\noindent
When changing the FormID of a single record, such as EnterpriseDIAL, there are no references to the record having its FormID changed. Other records, such as StarFleetFACT, are referenced several times and must have the records referencing them manually selected upon changing FormID. R-Click StarFleetFACT, select "Change FormID", then enter an unused [BORG].ESM ID.

\begin{figure}[H]
  \centering
  \includegraphics[width=85mm, frame]{Images/082_Orig.\CFE}
\end{figure}
\noindent
A window will appear in the event the form is referenced, listing the other records which reference it. In this case, all available referencing records should be updated, so R-Click and "Select All". Now, all of the Enterprise crew reference the [BORG].ESM ready faction record.

\begin{figure}[H]
  \centering
  \includegraphics[width=85mm, frame]{Images/083_Orig.\CFE}
\end{figure}
\noindent
Any plug-in with NavMeshes will have a GECK added record, NAVI, which is the single record in the Navigational Mesh Info Map group. This record keeps track of door connections and should not be manually edited with FNVEdit, but rebuilt by the GECK instead. Note that it has been updated since we?ve changed the FormIDs of the NavMeshes it references. For the moment, don?t worry about merging NAVI as we'll get to rebuilding that record with the GECK later on.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/084_Orig.\CFE}
\end{figure}
\newpage
\noindent
At this point of the merge, we can Multiselect everything else and change FormIDs en masse, so Multiselect the remaining 02 forms and inject them into [BORG].ESM.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/085_Orig.\CFE}
\end{figure}
\noindent
Following the same algorithm as described with Enterprise.esp, prepare KlingonVessel.esp for merge. Both files' structures are similar, so there shouldn?t be any surprises.
\newpage
\noindent
The mods are ready to merge when all FormIDs from Enterprise.esp and KlingonVessel.esp begin with 01. Make it so. Afterward, expand both mods in the left panel as shown below, highlight all groups, R-Click, select "Deep copy as override into\ldots", select [BORG].ESM, and assimilate away.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/086_Orig.\CFE}
\end{figure}
\noindent
After copying the new forms in, don't save just yet as there are a few things to check for. The "children" discussed earlier can sometimes end up "orphaned" when copied. The Cell, Dialogue Topic, and Worldspace groups can end up with such "orphans" if one is not careful. The GECK unceremoniously and silently deletes "orphans" on sight and aptly so as such records are known to cause in game issues such as crashing when, say, an orphaned reference tries to load. To ensure the assimilator remains healthy, proactively avoiding "orphaned" records is crucial when merging. To check [BORG].ESM for "orphans", select and expand the three groups mentioned above. The below pictures are "orphan" free.

\begin{figure}[H]
\begin{minipage}[H]{0,49\textwidth}
    \centering
		\includegraphics[width=85mm, frame]{Images/087_Orig.\CFE}
\end{minipage}
\begin{minipage}[H]{0,49\textwidth}
    \centering
		\includegraphics[width=85mm, frame]{Images/088_Orig.\CFE}
\end{minipage}
\end{figure}
\newpage
\noindent
If any instances of "Children" or "World Children" are present, you have orphans which will need "fostering". To do so, the errant copies must first be removed, so select any "Children" or "World Children" branches and remove them. Intact versions of these records are still contained within one of the two merged files, but recopying the records will render the same result until reloading the editor. Before this reload, should it be necessary, let's first check the rest of the contents for any discrepancies or other anomalies. \vspace{3mm} \\
Upon inspection, all Enterprise.esp and KlingonVessel.esp records show as "Identical to master" but for one, GREETING "GREETING" [DIAL:000000C8]. Since both merged plugins alter this record, as does [BORG].ESM, it needs manual manipulation so the dialogue checks out. This instance isn?t a conflict while the plugins are loaded separately, but a merged version will need all of the associated quests listed, so drag/drop them into [BORG].ESM.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/089_Orig.\CFE}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/090_Orig.\CFE}
\end{figure}
\noindent
Once you've gotten everything in order, you are ready to close FNVEdit and save your work. Since [BORG].ESM has new NavMeshes merged into it, its NAVI record will need updating by the GECK as previously mentioned. To facilitate doing so with [BORG].ESM, select its file header and hit F2 after clicking "ESM". The ESM flag will be ticked as [BORG].ESM is, for the moment, a bona fide ESM. Untick the ESM flag.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/091_Orig.\CFE}
\end{figure}
\noindent
Close and save all modified plugins.

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm]{Images/092_Orig.\CFE}
\end{figure}
\noindent
You'll be left with a false-flag ESM containing all content, save any "orphans" which we'll soon address, from Enterprise.esp and KlingonVessel.esp. \vspace{3mm} \\
If you had "orphans", open all three lab plugins in FNVEdit and "Deep copy as override into\ldots" [BORG].ESM again any groups which hadn't copied properly the first time and verify that the fresh copies are "fostered" or "parented". Sometimes reloading several times might be required in the event some copies end up "orphaned" again. \vspace{3mm} \\
If there are exactly zero "orphans", all that?s left is the Navigational Mesh Info Map (NAVI) which we'll rebuild with the GECK. Albeit, the GECK cannot have a bona fide ESM as its active file, it can do so with a false-flag one such as our [BORG].ESM.
\newpage
\noindent
Open [BORG].ESM in the GECK

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/093_Orig.\CFE}
\end{figure}
\noindent
Save in the GECK, once it's fully loaded, and NAVI will have been rebuilt to include the door connections from all three plugins. To verify all went well, look for "Saving\ldots Done!", then close the GECK.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/094_Orig.\CFE}
\end{figure}
\newpage
\noindent
Open up [BORG].ESM with FNVEdit and have a look at the new NAVI which should contain all of the door connections and such from the constituent plugins as well as any connections already within [BORG].ESM.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/095_Orig.\CFE}
\end{figure}
\noindent
After a successful merging process, Enterprise.esp and KlingonVessel.esp can be deactivated or deleted in favor of [BORG].ESM. Hopefully, these plugins will prove demonstrative, but they don't really do anything in game, so just delete it all after the exercise if you've downloaded the lab.
\newpage


\subsection{Converting a Plugin into a Master} \label{Chapter_6_5_Converting_a_Plugin_into_a_Master}
Converting a Plugin (esp) into a Master (ESM) file is a simple process that can be accomplished using FNVEdit in less than five minutes. The file extension of a Plugin as well as the ESM flag within its file header must be changed in order to make the transition to a bona fide Master file. The screenshot below starts the action by launching FNVEdit:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/096_Orig.\CFE}
\end{figure}
\noindent
First you need to de-select all of the mods using Right-click in the Master/Plugin Selection window (A). Then click/check just the mod your converting (B), in this example we're converting \xhref{http://www.nexusmods.com/fallout3/users/60908/?}{Antistar's} \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits} plug-in into a Master file. Click "OK" (C) to load FNVEdit with just the mod being changed as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/097_Orig.\CFE}
\end{figure}
\noindent
Note that Weapon Mod Kits is successfully loaded into FNVEdit (B), and that it is the only file listed aside from the Fallout: New Vegas Master files (A). You are now ready to convert the Plugin into a Master file.
\newpage
\noindent
To make the conversion, all we have to do is change one flag in the File Header, which can be accessed by Left-clicking open the \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits} record in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel}. Immediately beneath name of the mod is the File Header row (A) as shown below. You will then see the File Header data printed into the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} (B):

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/098_Orig.\CFE}
\end{figure}
\noindent
The File Header record is divided into different sub-headings and variables, including the Record Flags, Version, Author, mod Description and any Master file references that the plug-in requires. We will be changing the Record Flags variable by Right-clicking into the open space next to it (C), which will render a small context menu. You can then click, "Edit" (D) to change the values. Doing so will present a warning window as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm, frame]{Images/099_Orig.\CFE}
\end{figure}
\noindent
This window is a default/standard in FNVEdit, and exists to make sure that anytime you are about to change a mod file for the first time, you know about it. It may seem annoying to some, but often the worst conflicts between mods come from changes that a mod author did not intend to make. Simply select, "Yes" (A) to move along.
\newpage
\noindent
You will next be present with a menu of available/known flags that you can select:

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm]{Images/100_Orig.\CFE}
\end{figure}
\noindent
Note that many of the flags are blank or unknown, because literally the community does not know what those flag values mean. Fortunately the flag we need is the first one on the list (A), simply Left-click it and then click, "OK" to save the flag settings.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/101_Orig.\CFE}
\end{figure}
\noindent
With that you are done! Note the File Header text is now Bold (A) indicating a change, and the Record Flags in the View Tab (C) show that the ESM flag is set (B).
\newpage
\noindent
Once done with FNVEdit, you will want to change the file extension from Weapon Mod Kits.esp to Weapon Mod Kits.ESM so that the extension matches the File Header flagging. The GECK and Fallout: New Vegas don't really care about the file extension (ESP/ESM), what matters is that File Header flag. The Extension is for humans to keep them sorted correctly! Now all you need to do is exit FNVEdit or press, "Alt-S" and Save your new Master file as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm]{Images/102_Orig.\CFE}
\end{figure}
\noindent
It is also possible to change a Plugin to a Master using just \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} or other tools, but there is always the potential of problems with ONAM records. ONAM records are special records created that allow Master files to communicate with one-another when references need to be passed. FNVEdit ensures that as part of the conversion process, these ONAM records are built and correctly ordered. This is why it is better to make the Plugin to Master conversion using FNVEdit.
\newpage


\subsection{Splitting a Plugin into a Plugin/Master Pair} \label{Chapter_6_6_Splitting_a_Plugin_into_a_Plugin_Master_Pair}
Splitting a single Plugin (ESP) into a Master (ESM)/Plugin (ESP) pair can be useful in many situations, especially when a mod author wants to share resources from one Plugin with other Plugins. The only way to share resources between Plugins is to convert those resources into a Master file. The split is a two-part operation in which you first split the single Plugin into a duplicate Plugin and Master at the file (windows explorer) level. You then change the Flagging on one of the two duplicates to turn it into a Master, and change the flagging on the Plugin copy to make reference its new Master file. The action begins in windows explorer as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=155mm]{Images/103_Orig.\CFE}
\end{figure}
\noindent
With the mod copied, the next screenshot shows the paste:

\begin{figure}[H]
  \centering
  \includegraphics[width=155mm]{Images/104_Orig.\CFE}
\end{figure}
\noindent
This will create a duplicate of the WeaponModKits.esp Plugin. This may seem a very basic part of the process to duplicate, but was done for thoroughness and for those who can't read English and depend on the diagrams for the process.
\newpage
\noindent
Now we need to re-name the copy to make it our Master file version.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/105_Orig.\CFE}
\end{figure}
\noindent
You will be presented with a warning about changing the file extension, which is a common windows warning. Simply select, "Yes" when prompted. The screenshot below shows the last part of the duplication process:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/106_Orig.\CFE}
\end{figure}
\noindent
You will then be presented with the output; both a Plugin and Master file that are identical at this point. The screenshot below shows the Master (A) and Plugin (B):

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/107_Orig.\CFE}
\end{figure}
\noindent
With the file duplication part done, it's time to launch \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} to set our loading order for the new Master file as shown below: \vspace{3mm} \\
Once FOMM is loaded, find the WeaponModKits.esp (B) and WeaponModKits.ESM (A) versions of the mod in the list and ensure that both of them are Checked/Selected to load. The screenshot shows how FOMM will look when first loaded after the split, showing the ESP (B) is still checked (as it was before), while the new Master we just created is not yet checked (A) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/108_Orig.\CFE}
\end{figure}
\noindent
Here you must also ensure that the Master (ESM) version loads Before the Plugin (ESP) version as this is a Fallout: New Vegas requirement. The recommendation is to move the Master (ESM) higher-up in the load order before all other Plugins, and load the Plugin (ESP) version of \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits} somewhere below the Masters. With that done, close \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} and load FNVEdit. Your new load order with the Weapon Mod Kits.ESM loading before the Weapon Mod Kits.esp should be visible in FNVEdits as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/109_Orig.\CFE}
\end{figure}
\noindent
To load just the Master and Plugin, first Right-click in open space (A) and select, "None" from the context menu as shown above, and then check-off just the Weapon Mod Kits.esp and Weapon Mod Kits.ESM files (C), and click, "OK" to load them into FNVEdit. This will load just the two Weapon Mod Kits files and the Fallout: New Vegas Masters into FNVEdit as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/110_Orig.\CFE}
\end{figure}
\noindent
Note that both our Master and Plugin version of \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits} is loaded and ready for conversion (A). The loader confirms a successful boot-up in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} (B), indicating we are good to go for the conversions. Next we need to set the Record Flags to ESM (or Master) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/111_Orig.\CFE}
\end{figure}
\noindent
With the File Header block of Weapon Mod Kits.esp selected (A), Rightclick in the open space next to the, "Record Flags" section (C) which will render a small context Menu. Select, "Edit" (D) from this small menu to add the ESM Master flag, which effectively converts the Plugin into a Master. Before you can proceed however, you will get a warning message from FNVEdit about changing the mod's contents. This is normal and provided for your protection. Simply select, "Yes" (A) to continue.

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm, frame]{Images/112_Orig.\CFE}
\end{figure}
\noindent
The screenshot below shows you the Flags menu that is rendered:

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm]{Images/113_Orig.\CFE}
\end{figure}
\noindent
This, "Edit Value" menu shows you all of the known (and unknown) flags available for setting in a Fallout: New Vegas mod file for Record Flags. Many of the flags are known and can be selected, while a few still remain unknown. The only flag we care about is the, "ESM" flag (A), which you should check-off and then click, "OK" (B) to accept the new flag values.
\newpage
\noindent
Once done you will be presented with the outcome as shown below, which now has the Weapon Mod Kits.esp entry and its File Header in Bold text (A) in the Left-hand Panel, indicating the change. In the Right-hand \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} (C), the Record Flag row is now also in Bold text with the new, "ESM" flag now populated with it (B) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/114_Orig.\CFE}
\end{figure}
\noindent
Next we need to add the new Master version of \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits} (ESM) into the Plugin version (ESP) as a Master file reference, so that the Plugin references the Master. This will allow the Plugin (ESP) to use the Master (ESM) records going forward. The screenshot below shows you the first step in the process of adding a Master reference:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/115_Orig.\CFE}
\end{figure}
\noindent
Note that we're changing the File Header section just as we did when adding the ESM Master flag, but this time we Right-click in the Master Files row (B), and then selecting, "Add" from the context menu.
\newpage
\noindent
This will create a new, blank Master File reference in the \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits} Plugin that you can now assign to our new Master file as shown below (D), which we can then modify as needed. For our example we need to assign the new Master file entry to Weapon Mod Kits.esp. To make the change, simply Right-click in the open space to the right of the "MAST - Filename", entry (B), to render a small context menu. Then select, "Edit" (C) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/116_Orig.\CFE}
\end{figure}
\noindent
Clicking Edit will open a, "Edit Value" window, allowing you to type-in the name of the Master file you want to assign as the reference (A). Click, "OK" when done (B) to save the reference, which will take you back to the View Tab.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/117_Orig.\CFE}
\end{figure}
\newpage
\noindent
You should use the same case that the Master file does, in this case, "WeaponModKits.ESM" to ensure that there are no conflicts. And with that we're done! Note that the WeaponModKits.ESM is listed next to the, "MAST - Filename" entry (B), and that the File Header also has Bold text (A) indicating the change as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/118_Orig.\CFE}
\end{figure}
\noindent
And for the final step, you need to save the changes. Use, "Alt-S" or close FNVEdit to present the Save Files window as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=70mm]{Images/119_Orig.\CFE}
\end{figure}
\noindent
With this, you now have a Master/Plugin version of \xhref{http://www.nexusmods.com/fallout3/mods/3388/?}{Weapon Mod Kits}, and the process works exactly the same for any mod that you want to split. You can change the esp file extension to ESM, then open and save it with the GECK and it will tick the ESM flag on, but won't produce ONAM's like FNVEdit will which are needed for any overrides to FalloutNV.ESM's references. Unless your Plugin has no CELL and/or WRLD group, you're better off using FNVEdit.
\vspace{3mm}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{An .esp can be the Master of another .esp.}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{If you have a Plugin with multiple Masters, you'll have to edit your GeckCustom.ini \\
             "bAllowMultipleMasterLoads=1"}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{The GECK won't edit .ESM's, so you have to ESP'ify, edit in GECK, then ESM'ify.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage


\subsection{Comparing Two Versions of a Mod} \label{Chapter_6_7_Comparing_Two_Versions_of_a_Mod}
One of the common tasks that mod authors face is to compare two versions of their own mods, either during construction or in subsequent updates. There are also times when mod authors encounter difficult to solve problems with a new version of a mod, and need to revert back to a previous backup. The FNVEdit compare function can provide a valuable and convenient way of copying data from one version of a mod to another, without having to sort through records that don't belong to their mods. Whatever the case may be, this section is devoted to teaching you how to compare two versions of a mod file, and how to copy records over if the need arises. \vspace{3mm} \\
For this section we feature \xhref{http://forums.bethsoft.com/user/20313-quarn/}{Quarn's} \xhref{http://www.nexusmods.com/fallout3/mods/3808/?}{Unofficial Fallout: New Vegas Patch}, which has helped to resolve countless bugs in Fallout: New Vegas and has improved the gaming experience for thousands of modders. To start the action, launch FNVEdit and select One of the two mod files that you wish to compare as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/120_Orig.\CFE}
\end{figure}
\noindent
As shown above, by Right-clicking in open-space in the Master/Plugin selection window (A), you will render the selection menu (B) where you can, "Select None". Doing so will uncheck everything on the list. Then select just One of the two mods (C) and Click "OK" to load it (D). The screenshot below shows the result:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/121_Orig.\CFE}
\end{figure}
\noindent
Here we have just One of the two mod files loaded along with the Fallout: New Vegas Master files it depends on. We will need to hide these Master files from view so that we are Only looking at the mod file that we want to compare.
\newpage
\noindent
To hide the Master file references from view, we need to select each one of them in-turn with a Right-mouse click (A), which will present the main context menu. There you can select, "Hidden" (B), which is the last option on the list as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm, frame]{Images/122_Orig.\CFE}
	\label{Image_Hide_Feature}
\end{figure}
\noindent
You won't see any outward-change in the in the FNVEdit view afterwards, but you can confirm that they are marked as hidden by Right-clicking on them again - you will see a Check-mark next to, "Hidden" menu option indicating that they are hidden (from filters). \vspace{3mm} \\
Next we need to load the other version of the \xhref{http://www.nexusmods.com/fallout3/mods/3808/?}{Unofficial Fallout: New Vegas Patch} mod file we're comparing (the new/current version). You can do this by Right-clicking on the loaded-version of the mod (A), which will present the main context menu. Select, "Compare to\ldots" from the context menu (B) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm, frame]{Images/123_Orig.\CFE}
\end{figure}
\noindent
Selecting "Compare To" will present the, "Open" window as shown below, where you can select the current version of \xhref{http://www.nexusmods.com/fallout3/mods/3808/?}{Unofficial Fallout: New Vegas Patch} (A), and then, "Open" (B) to load it into FNVEdit as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/124_Orig.\CFE}
\end{figure}
\noindent
The "Compare To" version of the mod is loaded as read-only into FNVEdit, so you will not be able to make any changes to it, but you can copy from it into the version of Unofficial Fallout: New Vegas Patch that we loaded into FNVEdit at boot time. You can change the order and load either/any version of the mod first, so that you can edit/copy records into whatever version you loaded. \vspace{3mm} \\
Once the Compare To function loads the other version of the mod as read-only into FNVEdit, you will see a view similar to the one below. Note the two versions that appear together in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-hand panel} (A), and no errors noted in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} (B):

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/125_Orig.\CFE}
\end{figure}
\noindent
With both versions of the mod now loaded with the Compare To function, the last step is to apply a Filter to find the changed records between them. Note that with the Fallout: New Vegas Master files now listed as, "Hidden", they will not show up at all after we apply the filter - which is exactly what we want.
\newpage
\noindent
To apply a filter, right-click in the open-space (A) within the left panel to render the main context menu. Click, "Apply Filter" (B) to open up the Filter menu as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm, frame]{Images/126_Orig.\CFE}
\end{figure}
\noindent
The main Filter window will render, where you can select the Mod Comparison Filter Settings as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/127_Orig.\CFE}
\end{figure}
\noindent
Selecting the, "By conflict status for this particular record" (A), "Identical to Master" (B), "Override without Conflict" (C) and "Conflict status inherited by Parent" (D) sets the Mod Comparison Filters. You can then select, "Filter" (E) to apply the filter.
\newpage
\noindent
The Mod Comparison Filter should process quite quickly in most cases, unless you're working with a very large mod file. The screenshot below highlights the status bar, which will tell you how far along the filter operation are towards completion:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/128_Orig.\CFE}
\end{figure}
\noindent
Once done, the screenshot below illustrates the result. Both versions of the mod (at the top level) have Yellow backgrounds in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side panel} (A), indicating that they are not identical (of course). In the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Message Tab} we see that now errors were encountered by the Filter (B), along with some statistics:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/129_Orig.\CFE}
\end{figure}
\noindent
Opening one of the mods in the Left-Side Panel and selecting a record highlights the similarities where they are identical between the two mods with Green backgrounds (A) and records that are different with Yellow backgrounds (B).

\begin{figure}[H]
  \centering
  \includegraphics[width=155mm]{Images/130_Orig.\CFE}
\end{figure}
\noindent
At this point we are done with the comparison. You can browse through the \xhref{http://www.nexusmods.com/fallout3/mods/3808/?}{Unofficial Fallout: New Vegas Patch} records between the new and old versions, and compare the differences at will. If you don't need to make changes, you can simply close FNVEdit when done. \vspace{3mm} \\
If however there is a need to copy records from one version of the mod to the other, the process below will guide you through the steps. There are a few limitations to be aware of, such as you can't drag-n-drop records from the version you loaded at boot time into the version you loaded with the "Compare To" function, but you can still copy from that version as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/131_Orig.\CFE}
\end{figure}
\noindent
Here we Left-click-and-hold the record we want to copy with the mouse (A), and drag it horizontally to the mod we loaded when FNVEdit booted-up (B). Dropping the record into the row will copy that record (and all of its attributers) into the other mod. The screenshot below shows the results, with both sides now identical (A) and the background of both now Green (B) indicating they are indeed duplicates:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/132_Orig.\CFE}
\end{figure}
\newpage
\noindent
The screenshot below illustrates how FNVEdit will prevent you from drag-n-dropping records from the loaded version of \xhref{http://www.nexusmods.com/fallout3/mods/3808/?}{Unofficial Fallout: New Vegas Patch} into the "Compare To" version (which is loaded read-only). Note how when trying the drag-n-drop, you get a blocked-circle (B), indicating that you can't drop records into the read-only version:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/133_Orig.\CFE}
\end{figure}
\noindent
When you're done making changes, you'll need to save them. You can either close FNVEdit or press, "Alt-S" to render the Save Changed Files window:

\begin{figure}[H]
  \centering
  \includegraphics[width=90mm]{Images/134_Orig.\CFE}
\end{figure}
\noindent
With that, we're done with mod comparisons and updates! Of course you should not change the Unofficial Fallout: New Vegas Patch as that is for Quarn to do, but there is no harm in experimenting with the mods to learn the process (just make sure to have a backup of the files before you do!).

\newpage





\section{Transferring Mods from Fallout 3 to Fallout: New Vegas} \label{Chapter_7_Transferring_Mods_from_Fallout_3_to_Fallout_New_Vegas}
The process of transferring mods from Fallout 3 to Fallout: New Vegas is not only possible, it is simple in most cases and can be done within 5 to 60 minutes depending on how many Fallout 3-only references you have in your mod. \xhref{http://www.nexusmods.com/newvegas/mods/34774/?}{An analysis on the number of assets that were used in both Fallout 3 and Fallout: New Vegas} revealed that 32.7\% of all modable Fallout 3 models were transferred to Fallout: New Vegas and are present in both games. In practical terms when considering the number of kit-sets that were transferred, the percentage of assets present in both games is much higher. This is very good news for level designers and mods that contain generic (non-Fallout 3-specific content) models in our mods. If your mod doesn't place models/objects anywhere, you don't have to worry about any of these percentages. \vspace{3mm} \\
For those modders that did create levels/cells/places using Fallout 3 content, this means that a percentage of the models we used will not transfer when we port the mod to New Vegas. This process will help you to identify those Fallout 3-only assets, and how to assign placeholder objects for the transfer to New Vegas. Lastly we describe how to use the NV-GECK to replace those placeholder objects with shiny, new Fallout: New Vegas assets that have the same 3D location as the original Fallout 3 objects had. For some modders you may not care about going through the trouble of assigning placeholders to preserve the 3D orientation/location of the object, and we'll show those folks what steps to skip and which are important to the basic transfer operation. \vspace{3mm} \\
The resulting New Vegas mod will contain only content present in Fallout: New Vegas, and will thus be a legal mod that can be uploaded to Nexus and supported by the community. And so it is Very clear:
\vspace{2mm}
\begin{framed}
\vspace{-1mm}
\noindent
\textbf{It is ILLEGAL to use Fallout 3-only assets in Fallout: New Vegas mods, unless those assets exist in both games! If you violate this rule, others will point it out! Your mod will be pulled from Nexus and you will be publically shamed for being an idiot!
}
\vspace{-1mm}
\end{framed}
\vspace{2mm}
\noindent
Respect the companies (Bethesda and Obsidian) that support our very ability to mod their games, and do not use Fallout 3-only assets in your New Vegas mods! Please play by the rules and don't spoil it for the rest of us!
Now on with the show, the process for legally transferring Fallout 3 mods to Fallout: New Vegas starts below.
We'll use "MyHouse.esp" as our example plug-in:

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/135_Orig.\CFE}
\end{figure}
\newpage
\noindent
\textbf{Step 1} will be to make a copy of your mod using windows explorer, which you may need as a reference and because it's always smart to make backups! Open windows explorer and navigate to your \path{Fallout 3\data\} directory. Then select you're your mod and use Control+C then Control+V to make a copy:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/136_Orig.\CFE}
\end{figure}
\noindent
With our copy/backup made, \textbf{Step 2} involves adding "NV" to the name of the mod, which you can choose to avoid if you wish. I prefer adding "NV" to the mod name to avoid confusion, but you don't have to.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/137_Orig.\CFE}
\end{figure}
\newpage
\noindent
In \textbf{Step 3} we need to launch Fo3Edit (the Fallout 3 version), and load our mod-to-be-transferred. When Fo3Edit loads, make sure that Fallout3.esm and your plug-in are the only two checked, then click "OK".

\begin{figure}[H]
  \centering
  \includegraphics[width=80mm]{Images/138_Orig.\CFE}
\end{figure}
\noindent
For \textbf{Step 4}, expand the navigation tree for your mod by clicking on the + ("plus") sign, and then left-clicking the "File Header" entry. This will reveal the mod's header data, including its master file entries as shown below. Our goal is to change the "MAST - Filename" entry from Fallout3.esm to FalloutNV.esm:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/139_Orig.\CFE}
\end{figure}
\noindent
You may receive the traditional warning about editing a mod file (illustrated below); simply select "Yes" when allowed to.

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm, frame]{Images/140_Orig.\CFE}
\end{figure}
\noindent
In \textbf{Step 5} you will now be presented with the "Edit Value" window, where you can change Fallout3 to FalloutNV, and click "OK" to proceed:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/141_Orig.\CFE}
\end{figure}
\noindent
As shown in the screenshot below, this will change the Master file entry to FalloutNV.esm:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/142_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 6}: Close Fo3Edit by clicking on the "X" in the upper-right corner, after which you will be prompted to Save your changes to the mod file. Make sure your mod is checked as shown below, and click "OK".

\begin{figure}[H]
  \centering
  \includegraphics[width=90mm]{Images/143_Orig.\CFE}
\end{figure}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Once you change the master file to FalloutNV.esm, the mod will no longer load correctly in the Fo3 GECK, Fo3Edit or the Fallout 3 game! This is why it is critical to make a backup first!}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\noindent
\textbf{Step 7}: Move the mod file into the \path{Fallout New Vegas\data\} directory where it will live, usually located in your Steam directory structure as shown below. One convenient way of moving the file is to select it in explorer and hit Control+X, then left-click on the \path{Fallout New Vegas\data\} directory and hit Control-V. \vspace{3mm} \\
This will move the file as opposed to copying it, as our modified version of the mod file will no longer work in Fallout 3 and its best not to have copies of it languishing in the \path{Fallout 3\data\} directory! However you choose to move or copy the file is of course your choice.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/144_Orig.\CFE}
\end{figure}
\noindent
At this point there are several options as to what you can do to complete the transfer depending on the kind of mod your moving. I provide 2 jump-off points below for you to consider:

\begin{enumerate}
	\item If your mod doesn't contain cells/levels/areas of objects (like a player house), or your either confident that no references are missing or don't care if some references are lost, then click here for the \\
	      \xhyperref{Chapter_7_1_Quick_Finish_for_New_Vegas_Mod_Transfer}{Quick Finish for New Vegas Mod Transfer}.
	\item If your mod does contain cells/levels/areas and/or you want to ensure that no references are lost, then click here for the \xhyperref{Chapter_7_2_Complete_New_Vegas_Transfer_Process}{Complete New Vegas Transfer Process}.
\end{enumerate}
Both paths are viable and will result in a legal Fallout: New Vegas mod. The only warnings I feel compelled to provide is this:

\begin{itemize}
	\item[A.] If your mod has Fallout 3 references/objects that are not also in Fallout: New Vegas, then the quick finish will strip your mod of these references and you'll have to place new ones in the NV-GECK.
	\item[B.] If your mod has many Fallout 3 references/objects that are not also in Fallout: New Vegas, then the quick path may not work (the NV-GECK will crash if there are too many missing references).
\end{itemize}
\newpage


\subsection{Quick Finish for New Vegas Mod Transfer} \label{Chapter_7_1_Quick_Finish_for_New_Vegas_Mod_Transfer}
The quick finish to the transfer process is entirely due to Bethesda and Obsidian, and to the way in which they designed the GECK. I say this because when the GECK loads your mod, it is capable/able to avoid missing references and problems and still load your mod (even though not everything will work right for some reference types that have changed). Then when you Save, the GECK re-writes your mod file to disk reference-by-reference, it's a complete write in which the GECK re-evaluates everything and saves a properly formatted New Vegas mod to disk. It really is a wonderful gift, and we should all be thankful that they made it this easy. \vspace{3mm} \\
\textbf{Step 8}: Once done you can re-launch the NV-GECK and start making changes. Again remember that some references may not work the same as they did in Fallout 3, and you should re-test everything in your mod to make sure that nothing important got omitted or changed in a way you didn't anticipate. For most form types the transfer process works flawlessly. Launch the NV-GECK and load your plug-in as the Active file:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/145_Orig.\CFE}
\end{figure}
\noindent
Say "Yes to All" to any errors you see. If the GECK finishes loading your mod without crashing, you're in good shape. If it crashes, you need to use the complete process; \xhyperref{Chapter_7_2_Complete_New_Vegas_Transfer_Process}{Complete New Vegas Transfer Process}. \vspace{3mm} \\
\textbf{Step 9}: For mods that load without crashing the NV-GECK, simply click "Save" and close the NV-GECK as shown below to complete the transfer operation:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/146_Orig.\CFE}
\end{figure}
\noindent
That's it! You can now re-launch the NV-GECK and take a look to see what transferred well and what might need some work. You can also launch it with the Fallout: New Vegas game and begin testing! The NV-GECK now automatically strips-out any missing references, which is handy as it ensures that your mod contains only Fallout: New Vegas assets and is thus legal for upload to Nexus. And as a final warning:
\vspace{1mm}
\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Do not add Fallout3-only assets to Fallout: New Vegas mods! You will be caught and the mod taken down. It is neither legal nor honorable, so keep it clean for the benefit of everyone in the community. Thanks.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}


\subsection{Complete New Vegas Transfer Process} \label{Chapter_7_2_Complete_New_Vegas_Transfer_Process}
The complete transfer process will take you through the steps of checking your mod for missing references that are not in Fallout: New Vegas, and offer a method of preserving their location/orientation in your mod by using placeholders. It will also show you how to spot these missing references, and how to look them up in Fo3Edit so that you can see what they were and make decisions on how to move forward. There are two methods of dealing with missing references (or objects/things in your Fallout 3 mod that are Not in Fallout: New Vegas):

\begin{enumerate}
	\item Replace the missing references using FNVEdit and placeholders to preserve the location/orientation of these references, and then and Fallout: New Vegas objects in the NV-GECK.
	\item Replace those Fallout3-only references in the Fallout3-GECK with a reference/object that is also present in Fallout: New Vegas. In this manner your mod will transfer without missing any references, and you then replace those with New Vegas objects in the NV-GECK after the transfer.
\end{enumerate}
Both of these methods are described in this process, which will allow you to decide how you want to proceed in the transfer. \vspace{3mm} \\
\textbf{Step 10}: starts the process with launching Fo3Edit, and selecting the copy of your mod and Fallout3.esm as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/147_Orig.\CFE}
\end{figure}
\noindent
We load Fo3Edit with the Fallout3-copy of your mod to use as a reference, so that we can lookup references that show as missing. \vspace{3mm} \\
\textbf{Step 11}: Next launch FNVEdit and load you're new/modified New Vegas plug-in, which should show up if you copied the mod into the \path{Fallout New Vegas\data\} directory. The screenshot below shows an example:

\begin{figure}[H]
  \centering
  \includegraphics[width=90mm]{Images/148_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 12}: With both Fo3Edit and FNVEdit loaded with copies of your mod, we start by checking the FNVEdit version for errors. As we have not yet loaded the mod into the NV-GECK, any missing references will be called-out when you do this, and allow you the option of how to handle it. To check for errors, Right-Click your mod in FNVEdit and select "Check for Errors" as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/149_Orig.\CFE}
\end{figure}
\noindent
The checking for error process may take several seconds depending on the size of your mod. Any errors found will be displayed in the Messages tab of the Right-hand pane as demonstrated below. There may be several different kinds of errors displayed, but only the type indicated below are the missing references that you need to worry about replacing. Other errors will be resolved by the NV-GECK when you load and save the mod later on. The screenshot below gives you several examples of what these errors look like:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/150_Orig.\CFE}
\end{figure}
\noindent
If you don't see any of the "<Error: Could not be resolved>" errors, that means your mod doesn't contain any Fallout 3-only assets! At this point you can proceed to the Quick process for transferring your mod to New Vegas: \xhyperref{Chapter_7_1_Quick_Finish_for_New_Vegas_Mod_Transfer}{Quick Finish for New Vegas Mod Transfer}. Otherwise you should precede forward soldier!
\newpage
\noindent
To illustrate the missing references, you can expand the Cell tree in FNVEdit by Left-Clicking on "Cell" and typing "$\ast$" (asterisk). This will expand all levels of the Cell tree and allow you to examine each "Placed Object"
as shown in the example screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/151_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 13}: Back in the Messages Tab, we can start to copy/paste the FormIDs of the missing records into Notepad or another storage place. If you have just a few missing references, you can work on the one-by-one. If you have half a dozen or more, it will likely be easier to work on them as a group - the choice is yours. I recommend working on at least one missing reference first and see how it goes as instructed below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/152_Orig.\CFE}
\end{figure}
\newpage
\noindent
\textbf{Step 14}: Now you can Paste each of the missing FormIDs into the copy of Fo3Edit that you launched earlier (Or you can launch Fo3Edit again if you don't have it up, and load the Copy/Backup (Fallout3 version) of your mod now). Paste one of the missing FormIDs into the "FormID" window as shown below. This will find that reference and show it to you in the View Tab in the Right Pane:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/153_Orig.\CFE}
\end{figure}
\noindent
As we can see in the example above, the "ForgeDoorExterior" object reference was not carried forward from Fallout3 to Fallout: New Vegas, and is thus not present in FalloutNV.esm. You can do this with each missing FormID (copying from error message in FNVEdit, pasting into Fo3Edits FormID window) to see what they are. \vspace{3mm} \\
Next it will be time to make some choices about what to do with the missing references. There are 3 options:

\begin{enumerate}
	\item "Wack that sucker" (Delete the offending references).
	\item "Forget that crap, I'll fix it first!" (Replacing it in Fo3-GECK before transfer).
	\item "Slap in a shim" (Use a placeholder and fix it in the NV-GECK after transfer).
\end{enumerate}
If you don't want to deal with any of the missing references and want them All too just GO AWAY, then simply proceed to the quick process for transfer by clicking here: \xhyperref{Chapter_7_1_Quick_Finish_for_New_Vegas_Mod_Transfer}{Quick Finish for New Vegas Mod Transfer}. If there are some references that you care about and some that you don't care about precede forward soldier!
\vspace{3mm}
\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{You can simply forget about the object references that you want to delete, as the NV-GECK will wack em like a gangster with a Tommy Gun when you load it up and save the mod for the first time.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage
\noindent
\textbf{Option \#2}: If you wish to use the Fo3-GECK to fix the missing references before transferring the mod to New Vegas (pros only), you will need to replace the missing references with an object that is present in both games. This will allow them to transfer to New Vegas cleanly and without errors. If this is your choice then:

\begin{enumerate}
	\item Use the procedure outlined above in Steps 13 and 14 to make a list of all the FormIDs that you will need to replace in Notepad++ (or equivalent).
	\item Launch the Fo3GECK and replace those forms with an object present in both games, after which you can re-start the mod transfer process.
\end{enumerate}
You can use the \xhref{http://www.nexusmods.com/newvegas/mods/34774/?}{shared asset analysis} for a list of objects present in both games to find a suitable replacement, or you can launch both the Fo3GECK and NVGECK at the same time and switch between them to find common FormIDs. Once your done fixing references in the Fo3GECK save the mod and start the transfer process again. \ul{Stop here, and get to work soldier!} \vspace{3mm} \\
\textbf{Option \#3}: If however you want to fix the missing references in the NV-GECK after transferring the mod to New Vegas (which is my recommendation), then proceed with Step 15 below. \vspace{3mm} \\
\textbf{Step 15}: We will be inserting placeholder objects for all of the missing references, so that they will transfer to New Vegas cleanly and give us placeholders in the NV-GECK with exactly the same location/orientation as the original Fallout3 objects. \vspace{3mm} \\
In our example mod we have two missing form types; two copies of the same door (ForgeDoorExterior) and a sign (MetroSignFriendship). Neither of these objects references exists in Fallout: New Vegas. To replace them with shims, we'll start with the missing doors. Right-Click on the mod and select "Add" then "Door" as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/154_Orig.\CFE}
\end{figure}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{If you don't know what type of form to insert, choose "MISC - Misc Object". It's just a shim!}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage
\noindent
\textbf{Step 16}: This step may or may not be necessary for your mod. If this is the first door reference for the mod, then Step 15 will create the top level door category as shown circled near "A" below. If however you already had doors in your mod, then you will already have a top level "Door" category and you should skip to \textbf{Step 17}. \vspace{3mm} \\
If however this was the first door-type objects in the mod (which is the case in our example), then you will need to add the door reference again to create an actual individual door. Right-Click on the Door root category as shown below in Step a, then select "Add" and "Door":

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/155_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 17}: As a result of Step 15 (if you had a door root category already) or Step 16 (if you didn't), you will be presented with a New FormID window. Here you can determine what the new FormID will be, which must be unique from all other FormIDs in your mod and FalloutNV.esm. \vspace{3mm} \\
FNVEdit will pre-populate the field with the next available FormID in your mod, which we will want to change to the FormID we copied from Step 13/14 (from your list of missing FormIDs). Using the missing FormIDs from the Error messages in Step 13 has the advantage of replacing all instances of those references at one stroke without you having to hunt through each cell to find them. The example FormID below is for our missing doors:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/156_Orig.\CFE}
\end{figure}
\newpage
\noindent
Note the result shown below; the new door placeholder has been inserted into your mod with the FormID of the missing reference from the Fallout 3 version. The placeholder doesn't have an EditorID (common name) yet, nor a 3D model assigned. We will cover both of those steps next and turn this into a valid placeholder that you can work with in the NV-GECK.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/157_Orig.\CFE}
\end{figure}
\noindent
You will also notice the injection notice in the Messages Tab, indicating that this form "was injected into FalloutNV.esm". As a placeholder item only, \ul{this is Okay and does not actually change your FalloutNV.esm in any way, shape or form!} The message is simply warning you that this FormID lives in the same range as the rest of the FalloutNV.esm objects. We will delete it in NV-GECK once we find a real object for it later on.

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/158_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 18}: Changing the EditorID of our placeholder object that we can use in the NV-GECK later on. One recommendation is to take the FormID of the original Fallout3 object and add a "ph" at the front (for Place Holder). That way when you load the mod into the NV-GECK, the placeholders will all have names close to the original Fallout3 object, and also so that you can find all the placeholders later on by simply putting "ph" into the Object filter window. In our example, "ForgeDoorExterior" would get an EditorID of "plForgeDoorExterior". \vspace{3mm} \\
To change the EditorID, Right-Click on the EDID row in the View Tab (A) to render the editing window and select "Edit" (B) to spawn the Edit Value window:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/159_Orig.\CFE}
\end{figure}
\noindent
With the Edit Value window loaded, you can input the new EditorID and click "OK" as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=70mm]{Images/160_Orig.\CFE}
\end{figure}
\noindent
As you can see from the resulting screenshot below, our placeholder door now has an EditorID (A, B):

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/161_Orig.\CFE}
\end{figure}
\newpage
\noindent
If you open-up the Cell view by Left-Clicking it and pressing "$\ast$" (asterisks), you will note that both occurrences of our missing door reference have been replaced with our placeholder objects:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/162_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 19}: The last step for each placeholder is to assign a model to that placeholder so that you can see it in the NV-GECK, select it with your mouse and thus replace them with New Vegas objects. To do this we first need to tell FNVEdit that this object has a model. To do this, Right-Clicking on the "Model" row of the View Tab (A) to spawn the editing window and select, "Add" (B) to create the model reference:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/163_Orig.\CFE}
\end{figure}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{We're changing the model on the missing Sign in this example; it works the same for the door and all other placeholder objects that you may need to add.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\newpage
\noindent
\textbf{Step 20}: Next we will assign a specific 3d model to the placeholder entry by Right-Clicking the "MODL - Model Filename" entry (A) and selecting "Edit" from the editor window (B) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/164_Orig.\CFE}
\end{figure}
\noindent
This will spawn the Edit Value window (below) into which you can enter a model filename. I recommend using the common Ashtray model for your placeholder items, as it's easy to see in the GECK and has a short path/filename that is easy to remember. As shown below we need to enter the path and the filename together, which in this case is "\path{clutter\ashtray\ashtray01.nif}". You can cut-and-paste into each placeholder you make:

\begin{figure}[H]
  \centering
  \includegraphics[width=70mm]{Images/165_Orig.\CFE}
\end{figure}
\noindent
The result is shown in the screenshot below, which is a completed placeholder with EditorID and model:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/166_Orig.\CFE}
\end{figure}
\newpage
\noindent
\textbf{Rinse-and-Repeat}: Assuming you have a list of missing reference FormIDs from Steps 13 and 14, you will need to repeat Steps 15-20 for at least 1 instance of each missing FormID.

\begin{itemize}
	\item[] \textbf{Step 15}: Inserting a placeholder object for the missing reference (Right-Click mod, Add $\rightarrow$ Type).
	\item[] \textbf{Step 16}: Repeating Step 15 if no top-level category existed.
	\item[] \textbf{Step 17}: Copy/Paste the missing FormID from your Step 13/14 list of missing FormIDs.
	\item[] \textbf{Step 18}: Change the EditorID of the placeholder object (Right-Click EditorID, Edit, and Add "pl" to name).
	\item[] \textbf{Step 19}: Add a model reference to the placeholder object (Right-Click Model, Add).
	\item[] \textbf{Step 20}: Assign "\path{clutter\ashtray\ashtray.nif}" as the model name \vspace{1mm} \\
	\rule[-1ex]{0pt}{0pt} \hspace{13.3mm} (Right-Click MODL, Edit, Copy/Paste).
\end{itemize}
\vspace{-1mm}
\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Remember, if you have multiple copies of the same missing FormID (like in our example where we had two copies of the ForgeDoorExterior), you only need to create the placeholder for it once. FNVEdit will update all other instances for you.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\vspace{1mm}
\noindent
\textbf{Step 21}: Save your work and exit FNVEdit! You can do this simply by closing FNVEdit, after which you will be prompted with the Save changed files window as shown below. Make sure your mod is Checked as shown and click "OK".

\begin{figure}[H]
  \centering
  \includegraphics[width=90mm]{Images/167_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 22}: Great Job! With that done, you have completed the hard part of the complete transfer process and are ready to conduct a final error check to make sure you didn't miss anything, and it will be time to fire up the NV-GECK. To run a final test on checking for errors, simply re-launch FNVEdit and re-load your NV mod:

\begin{figure}[H]
  \centering
  \includegraphics[width=90mm]{Images/168_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 23}: Once FNVEdit is done loading your mod, run the error check again by Right-Clicking on your mod (A) and selecting "Check for Errors" (B) from the context menu:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/169_Orig.\CFE}
\end{figure}
\noindent
If you have replaced all of the missing FormIDs, then your error check should either come up totally clean (showing no errors) OR you may still see some errors, but none of the "<Error: Could not be resolved>" types. The example screenshot below shows no errors found, which will be the common outcome. As long as you don't have any "<Error: Could not be resolved>" errors, your good to go. If you do, go back to Steps 13-20 and replace those missing errors.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/170_Orig.\CFE}
\end{figure}
\noindent
This outcome shows that we are ready to complete the transfer by loading our mod in the NV-GECK! Yay!
\newpage
\noindent
\textbf{Step 24}: Launch the NV-GECK!

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/171_Orig.\CFE}
\end{figure}
\noindent
Now load your mod by double-clicking it, and then clicking "Set as Active File". Note that the Parent Masters listed for the mod is FalloutNV.esm, which is correct. Clicking OK will load your mod. Make sure to select, "Yes" to all errors:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/172_Orig.\CFE}
\end{figure}
\noindent
If however your mod crashes when you try loading it in the NV-GECK and you still don't have any "<Error: Could not be resolved>" errors, then proceed to the "delete offending references" section by clicking on: \vspace{1mm} \\
\xhyperref{Chapter_7_3_Deleting_Offending_References}{Deleting Offending References}.
\newpage
\noindent
\textbf{Step 25}: If your mod is successfully loaded into the NV-GECK, all you need to do is Save your mod and Exit!

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/173_Orig.\CFE}
\end{figure}
\vspace{-2mm}
\noindent
Congratulations!! You have successfully transferred your mod to Fallout New Vegas. You're not quite done with the overall process as we still have to replace our placeholders, but you've taken a big step! \vspace{3mm} \\
\textbf{Step 26}: First re-launch the NV-GECK and re-load your mod as the Active file. This time when you load the mod, you should not see any errors listed. This is because when you loaded and saved the mod in Steps 24 and 25, any remaining missing references or errored-forms will have been either removed or fixed by the NV-GECK during the Save operation. If you do have errors when loading the mod into the NV-GECK the second time, you will want to note these as they will each need attention. \vspace{3mm} \\
\textbf{Step 27}: Once your mod is loaded in the NV-GECK, double-click on one of your cells to load it into the render window, as we have with our house mod in the example below. Note our ashtray placeholders ready and waiting for us:

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/174_Orig.\CFE}
\end{figure}
\vspace{-2mm}
\noindent
The important aspect of these placeholders is that they have retained the exactly location and orientation of the original Fallout 3 object, which will be very handy in a lot of cases as placing objects in specific spots is often a time consuming aspect of level design. Using our placeholder method, don't have to redo any of that - we just need to replace the placeholders with real New Vegas objects. \vspace{3mm} \\
\textbf{Step 28}: Replacing placeholder objects. Select one of the placeholder objects in your cell by Left-Clicking it (A), and type Control+F to spawn the Search \& Replace window. In the example screenshot below we start with replacing the sign placeholder (which had been MetroSignFriendship in the Fallout 3 version).
\newpage
\noindent
Note the EditorID name in the Search For window (C), "phMetroSignFriendship", and use the Replace With (D) to find a suitable New Vegas object to replace the placeholder with. In our example I'll choose "TheTopsSign01" as it's unique to New Vegas and will look cool in my player house:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/175_Orig.\CFE}
\end{figure}
\noindent
Note the result below, in which the Tops sign was very much larger than the Friendship Metro sign. I showed this as an example of what can happen, which is easily fixable by adjusting the scale of the Tops sign down to about 20\% of normal.

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/176_Orig.\CFE}
\end{figure}
\noindent
\textbf{Step 29}: Once the scale of the Tops sign is adjusted to 20\%, it looks quite nice in the corner now. Lastly we can multi-select the door placeholder objects by holding down Control and Left-Clicking each of the placeholder ashtrays (A, B).
\newpage
\noindent
Once multi-selected simply press Control+F to spawn the Search and Replace window as before (C), where you can find a suitable door in the "Replace With" window (D). In our example we'll use the IndDoorSmAnim01 door, which uses exactly the same model as the Fallout 3 "ForgeDoorExterior", but you won't always get that lucky. You can use the "Preview" feature in the Object Window to find suitable replacements.

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm]{Images/177_Orig.\CFE}
\end{figure}
\noindent
The result of our two replacements is shown below, which looks like a normal Fallout New Vegas cell that is very close to the Fallout 3 version.

\begin{figure}[H]
  \centering
  \includegraphics[width=110mm]{Images/178_Orig.\CFE}
\end{figure}

\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{Object references that get replaced may need to be further modified, such as doors which will need to be re-linked to their counterparts in other cells.}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{\textbf{Rinse and Repeat}: You will need to replace all of the placeholder objects in your mod using Steps 28 and 29, which can take some time depending on how many placeholder objects you have.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\begin{center}
The resulting mod is ready for clean-up and saving!
\end{center}

\begin{figure}[H]
\begin{minipage}[H]{0,49\textwidth}
    \centering
		\includegraphics[width=85mm, frame]{Images/179_Orig.\CFE}
\end{minipage}
\begin{minipage}[H]{0,49\textwidth}
    \centering
		\includegraphics[width=82mm, frame]{Images/180_Orig.\CFE}
\end{minipage}
\end{figure}
\noindent
\textbf{Step 30}: Deleting placeholder references. The last step is to delete the placeholders, which are no longer needed. You can do this most simply by typing "ph" into the Filter Window (A) and find the placeholder entries in the Editor ID window (B). Then multi-select the placeholder items and either press delete or Right-Click them and select "Delete" (D). This will wipe them out of your New Vegas mod.

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/181_Orig.\CFE}
\end{figure}
\newpage
\noindent
\textbf{Step 31}: Now it's time to make the final save! Simply click the Save icon again and close the NV-GECK:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/182_Orig.\CFE}
\end{figure}
\noindent
You can now load your Fallout: New Vegas mod and check it out in-game! You have successfully and legally transferred your mod from Fallout 3 to Fallout: New Vegas. Congratulations! \vspace{3mm} \\
If there are ways in which I could improve this process, please let me know by \xhref{http://forums.bethsoft.com/user/522202-miaximus/}{PMing me as Miaximus} on the Bethesda Softworks forums. Thanks!
\newpage


\subsection{Deleting Offending References} \label{Chapter_7_3_Deleting_Offending_References}
Some mods have some many errors in them that the NV-GECK crashes when trying to load them up. This happened to my own big mod (Skyhaven Airport), which had 2,228 missing references and other errors when checking for errors in FNVEdit! The NV-GECK crashed violently when trying to load a mod with that many errors. Like so many of us, there is a limit to how much garbage that the GECK can swallow without vomiting. \vspace{3mm} \\
If your mod is suffering this fate, there is hope! You can mass-delete the offending references from your mod with FNVEdit, or delete enough of them to so that the NV-GECK can take it without vomiting all over your computer (it's gross!). I don't know what that limit or number is, you may need to experiment if you want to delete some but not all of the offending errors. Below are some examples of the kinds of errors you may encounter, from background loader errors to errors you get when Checking for Errors:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/183_Orig.\CFE}
\end{figure}
\noindent
Note that the process of Checking for Errors can take a bit depending on how many errors you have and how large the mod file is. You can track the progress by watching the top menu bar:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/184_Orig.\CFE}
\end{figure}
\newpage
\noindent
The samples below are all of different types of errors that you might encounter when Checking for Errors in FNVEdit:

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/185_Orig.\CFE}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/186_Orig.\CFE}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/187_Orig.\CFE}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/188_Orig.\CFE}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/189_Orig.\CFE}
\end{figure}
\noindent
Most of these error types will be cleaned-up by the NV-GECK, but missing references and "Could not be resolved" references will cause problems in large numbers. There is also a common critical error regarding the wasteland that many mods will face.
\newpage
\noindent
The short process below will step you through cleaning your mod of all of these offending references. \vspace{3mm} \\
Step 1: We'll start with the most common, critical error that mod files will face when transferring to New Vegas; having references to the DC Wasteland world space. You can check by clicking-open the "Worldspace" record type in your mod (if you have one), and looking through the list of worldspaces included. If the DC Wasteland exists in your mod, you will see it listed and italicized as shown in the example below (A).

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/190_Orig.\CFE}
\end{figure}
\noindent
As shown you will need to remove this entire entry from the mod file by Right-Clicking on the Wasteland record (A) and selecting "Remove" from the context menu (B). You will receive a warning message similar to the one shown below, which you should select "Yes" to:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/191_Orig.\CFE}
\end{figure}
\noindent
This will strip the entire wasteland out of your mod, and solve that critical issue. If you had this problem then I recommend saving and exiting FNVEdit at this point, and trying your mod in the NV-GECK again. Trust me, the NV-GECK will be a lot happier with you this time, as it wants nothing to do with the DC Wasteland worldspace. \vspace{3mm} \\
If you still have crash problems with the NV-GECK, proceed to the next step.
\newpage
\noindent
If you've reached this point and your mod still causes the NV-GECK to crash, then you may have no other choice but to mass-delete all of the missing references from your mod file. You can do this in FNVEdit by simply expanding each record type by Left-Clicking on them, pressing "$\ast$" (asterisk) to expand the tree and finally clicking the "Name" column (B) to sort the records. As shown below, you will then see the errored references grouped together (C):

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/192_Orig.\CFE}
\end{figure}
\noindent
Simply multi-select "Could not be resolved" references and press Delete to wack them out of the mod. You will need to do this for every record heading in your mod, especially the Cell and Wordlspace types. This may take you some time, but when done you should have no instances of <Error: Could not be resolved> present in your mod. \vspace{3mm} \\
Close FNVEdit when done and Save your work. Then re-launch the NV-GECK and try loading your mod file again. This time you should have more success assuming you removed enough (or all) of the errored references. In my testing I have found that the NV-GECK is "wasteland-hardy", and will ingest a ton of shit before racing for the toilet. This is good for us, as you have an excellent chance of the NV-GECK loading your mod if you remove enough of the offending references. \vspace{3mm} \\
If the NV-GECK still crashes when trying to load your mod, trying posting a message in the \xhref{http://forums.bethsoft.com/forum/111-the-geck-fallout-new-vegas/}{Bethesda GECK forum} for help, and include as many details as possible (a link to your mod file on FileShare or equivalent is always helpful). Good luck!

\newpage





\section{Mod Utilities} \label{Chapter_8_Mod Utilities}

\subsection{Overview} \label{Chapter_8_1_Overview}
The mod utilities are a collection of functions that have been added to FNVEdit over the years for both Oblivion and Fallout: New Vegas that can aid mod authors in several areas. The next sections review these functions and describe how to utilize them.


\subsection{Building Reference Information} \label{Chapter_8_2_Building_Reference_Information}
Building reference information is a common task that is often performed behind the scenes by FNVEdit, and essentially finds all instances of a "Thing" in the game. Be it a script, NPC or a toilet, the build reference info function will show you all of them across the mod files loaded into FNVEdit. In this section we feature \xhref{http://forums.bethsoft.com/user/484105-xodarap777/}{Xodarap's} \xhref{http://www.nexusmods.com/fallout3/mods/334/?}{Fallout Overhaul} (XFO) mod, which is known as one of the bigger, stable mods that changes that make your gaming experience much more challenging and immersive (I use this myself, so I had to feature Xodaraps fine work!) \vspace{3mm} \\
For our example of building reference information, there are a couple of choices to consider; If you are trying to find All instances of that Thing, then load all of the mod files when loading FNVEdit. If however you are looking for instances of a Thing in a single mod-file, then you'll only want to load that mod-file as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/193_Orig.\CFE}
\end{figure}
\noindent
Here we start the action by Right-clicking in the open white-space of the Master/Plugin Selection window (A) which presents a small context menu. From this menu choose, "Select None" (B) to clear all check marks.
Then you can select just the XFO mod we want to load (C) and click, "OK" to bring it up into FNVEdit.
\newpage
\noindent
Once FNVEdit is loaded, you will be presented with a screenshot similar to that below. There you can see the three mods loaded, the \xhref{http://www.nexusmods.com/fallout3/mods/334/?}{XFO} stand-alone version and its two Masters. To build reference information, Rightclick on the XFO entry in the Left-side Panel (A) which will present the main context menu. Select, "Build Reference Info" (B) from this menu as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/194_Orig.\CFE}
\end{figure}
\noindent
This will present you with a new window for, "Building reference information", where you can select the Master files or other mod files that you want to build reference information for (A). If you are looking through all mod files, make sure that you select everything (you can also use the Right-click, "Select None" method to quickly check them all:

\begin{figure}[H]
  \centering
  \includegraphics[width=80mm]{Images/195_Orig.\CFE}
\end{figure}
\noindent
This process can take some time depending on how many mods you are building reference information for.
\newpage
\noindent
Fortunately there is a status indicator in the top window (A) that shows you the time elapsed during parsing as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/196_Orig.\CFE}
\end{figure}
\noindent
Note how there is a new Tab at the bottom, the \xhyperref{Chapter_2_3_6_Right_Side_References_Tab}{Referenced By Tab}, which displays the output of our reference check. As shown above, the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} shows the overall outcome of the function, while the screenshot below shows you the Referenced By Tab and its output.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/197_Orig.\CFE}
\end{figure}
\noindent
In this case we Left-clicked on the Drink Toilet record in \xhref{http://www.nexusmods.com/fallout3/mods/334/?}{XFO}, and can see very instance of the toilet in the Referenced By Tab. Each row in the output shows you extensive information about the reference, the cell it's placed in, the name of the location, and its FormID, etc. You can run this function for any time in any mod that you wish!
\newpage


\subsection{Building Reachable Information} \label{Chapter_8_3_Building_Reachable_Information}
For our example of building reference information, there are a couple of choices to consider; If you are trying to find All instances of that Thing, then load all of the mod files when loading FNVEdit. If however you are looking for instances of a Thing in a single mod-file, then you'll only want to load that mod-file instead of the entire list. Some important notes about the "Build Reachable Info" function. \vspace{3mm} \\
After you've run that function, you'll see that some records are displayed stricken-through. These records are considered to be "not reachable". \vspace{3mm} \\
There are some limits to this. The "not reachable" classification is only true if you:

\begin{itemize}
  \setlength\itemsep{\CustomItemGap}
	\item Start a new game with exactly the mods you've currently loaded.
	\item Do not use the console in any way.
	\item There are no \xhref{http://fose.silverlock.org/}{FOSE} scripts involved that use some dirty tricks to get hold of a reference to something without that something showing up in the SCRO's of the script.
\end{itemize}
Also the meaning of "reachable" is sometimes a bit gray. For example; For Activator's, Statics, Weapons, Armor, and so on "reachable" means that the player character should be able to get somewhere from where he can see the object and/or somehow get it into his inventory. For Quests it means that the quest either starts enabled or that there is probably some way how it can become enabled or at least that somewhere the variables belonging to the quest script get accessed. For DIAL's and INFO's it means that it's probably possible to select the topic somewhere or hear the response somewhere. For CELL's and WRLD's it means that the player character is probably somehow able to enter it. \vspace{3mm} \\
Start the action by right clicking in the open white space of the Master/Plugin Selection window (A), which will present a small context menu. From this menu choose, "Select None" (B) to clear all check marks. Then you can select just the \xhref{http://www.nexusmods.com/fallout3/mods/334/?}{XFO} mod we want to load (C) and click, "OK" to bring it up into FNVEdit as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/198_Orig.\CFE}
\end{figure}
\newpage
\noindent
Once loaded, Right-click on the mod to build reachable info for (A) to render the main context menu. Select, "Build reachable info" from the menu to run the function as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/199_Orig.\CFE}
\end{figure}
\noindent
As with the \xhyperref{Chapter_8_2_Building_Reference_Information}{Build Reference Information} function, the build reach ability function may take some time to process all of the records depending on how many mods you are loading for the comparison. The status bar at the very top will give you indication of how far along the function is during parsing as shown below. The \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} shows the log-file output as it happens, and overall this function can take some time to complete:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/200_Orig.\CFE}
\end{figure}
\noindent
Be aware that half-way through the process, the Elapsed Time clock on top will appear to stop, and FNVEdit will appear to be frozen or locked-up. In truth the Elapsed Clock only counts through half of the Build Reachable Info function, so be patient - the process will complete within a minute or two.
\newpage
\noindent
Once the Build Reachable Info function is complete, you will see the, "All done!" notice in the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} (A) along with log file output. The \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side panel} shows all of the records in the mod with Green Text, Yellow Background (B) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/201_Orig.\CFE}
\end{figure}
\noindent
We're not quite done yet, next we need to apply a Filter to remove all records from the view except those that are considered, "Unreachable". To do this, Right-click on the mod in the Left-side Panel (A), and select, "Apply Filter" from the main context menu:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/202_Orig.\CFE}
\end{figure}
\noindent
Once Apply Filter is selected, the main Filter window view will be presented as shown below, where you can apply the Reachable Info Filter.
\newpage
\noindent
The screenshot below illustrates the Reachable Info filter settings that you will need to set; this time just two, "by not reachable status" (A) and "only not reachable" (B). Then select, "Filter" (C) to apply the new filter settings as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/203_Orig.\CFE}
\end{figure}
\noindent
This filter should not take very long to process, perhaps several seconds. Below an example is shown of the \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} output, indicating the result of the filter (B). You can also see the stricken-through records (A) that are not reachable by the player:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/204_Orig.\CFE}
\end{figure}
\newpage
\noindent
The final results of the Build Reachable Info function are shown in the screenshot below via the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} (A) and \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side panel} (C), where the stricken-through records are shown with horizontal lines through the text. These stricken-through records are those which are not considered, "Reachable" by the player-character ingame. You can click-open any of the record headings in the Left-side Panel to see the un-reachable records by category as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/205_Orig.\CFE}
\end{figure}
\noindent
Note that in the FormLists you might see some things marked as unreachable which do technically have an effect on the player character. For example, the repair lists will show up as unreachable. The reason for that is that if the repair-list was marked as reachable, it would automatically mark all contained records as reachable. But that's not really right. Just because something can possibly be used to repair an object that the character has doesn't meant that this something can actually ever be acquired by the player. So really, for FormLists the reachable status doesn't mean much either way. \vspace{3mm} \\
Outside of FormLists, there shouldn't be any false negatives (meaning something marked as unreachable which has an influence on the game). There can be false positives (something marked as reachable while it's not). e.g. it's possible for a CELL to be considered reachable even though the only way to get there is through a door which can only be opened with a key and the key is not reachable. \vspace{3mm} \\
For an INFO record to be reachable even though none of the conditions attached to the responses could ever possible be true or the quest that the INFO belongs to will never be enabled. For any type of object could be reachable even though it's just used in a GetIsID check in some script (not in a CTDA, objects referenced from conditions never become reachable through that). \vspace{3mm} \\
Overall, even with all these shortcomings and gray areas, if someone ends up being marked as not reachable, that's a very strong indication that the particular thing will not normally effect the game.
\newpage


\subsection{Changing and Adding References} \label{Chapter_8_4_Changing_and_Adding_References}
One of the less-used features of FNVEdit allows you to actually insert to records (items, scripts, NPCs, etc.) into a mod-file directly from FNVEdit. The GECK is of course the preferred method of adding new things to your mod, but in certain circumstances it is easier or simpler to add the thing directly to the file without the GECK. This function saw its most use just prior to the release of the GECK, when there was no tool to use for such purposes. Now with the GECK in play, there is less of a need for this capability, but it still exists in FNVEdit and is documented for cases in which you want to add references directly to the game. \vspace{3mm} \\
In this section we feature \xhref{http://forums.bethsoft.com/user/7327-martigen/}{Martigen's} \xhref{http://www.nexusmods.com/fallout3/mods/3211/?}{Marts Mutant Mod (MMM)}, which is one of the very best mods created for Fallout: New Vegas. The screenshot below starts the action, in which we Right-click in open space somewhere in the Master/Plugin Selection window (A), then choose, "Select None" to un-check all of the entries. Now check-off the mod you want to change (C), and click, "OK" to load it into FNVEdit (D) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/206_Orig.\CFE}
\end{figure}
\noindent
Once loaded, the screenshot below shows you the expected results. Here we see that only MMM is loaded (A), along with its Master file references. The \xhyperref{Chapter_2_3_5_Right_Side_Messages_Tab}{Messages Tab} shows the outcome of the load, and any errors that may persist (B) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/207_Orig.\CFE}
\end{figure}
\newpage
\noindent
With our mod loaded and on the operating table, it's time to start changing and added records! The first example below is of a reference change, in which we alter the Flags used on our test NPC, Lucky Harith (He is just THE man, so I had to feature him). The screenshot below illustrates the process:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/208_Orig.\CFE}
\end{figure}
\noindent
We start by opening-up the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} record tree for \xhref{http://www.nexusmods.com/fallout3/mods/3211/?}{MMM} to the location where we want to change things (A), and choose Lucky Harith with a Left-Mouse Click (B). To edit a record, Right-click its entry in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} (C) to render a small context menu, then select, "Edit" (D) to open the edit context menu as shown above.
\newpage
\noindent
The, "Edit Value" window will now be presented, allowing you to check/select any flags that you want Lucky Harith to have added to them. As we just can't let Lucky down, we'll give him an Essential flag so that he never dies! Check-mark the Essential flag row in the window (A) and select, "OK" to set the flagging (B) as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=70mm]{Images/209_Orig.\CFE}
\end{figure}
\noindent
Once OK is selected, you are taken back to the main View Tab where you can see the new flags set (A). Note that the Flagging is also now in Bold, indicating that they have been marked as changed and will thus be saved as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/210_Orig.\CFE}
\end{figure}
\noindent
Also note that the reference Text (B) and the record entry (C) are also both in Bold Text, marking them as changed for saving. See how easy that was!?!
\newpage
\noindent
To add a new reference into a record, the process is very similar. Let's keep with Lucky Harith, and add some Rad-X to his inventory so that he's ready for everything! To do this, start by Left-Clicking the record you want to change (A) in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel}, then Right-click the row in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} adjacent to the type of record you want to add. In this case we're adding an item, so to the right of, "Items" in the View Tab is where you want to Right-click (B). A small context window will render, select, "Add" (C) as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/211_Orig.\CFE}
\end{figure}
\noindent
Once you click, "Add", a new blank item entry will be added into the View Tab (A) next to the item reference (B). Also note it shows with a Yellow background (A).

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/212_Orig.\CFE}
\end{figure}
\noindent
Initially all new items get added as a "NULL" (RefID 00000000) which is obviously not right. Once added you will need to change (Edit) the new item to turn it into the Rad-X item that we want to give to Lucky Harith.
\newpage
\noindent
To transform our new NULL item into Rad-X, we first Right-click on the new item (A) and click on which renders a small context menu. Select "Edit" (B) from the menu as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/213_Orig.\CFE}
\end{figure}
\noindent
This will pull-up a small, "Edit Value" window as shown below. Here you can input the FormID of the Rad-X item, which is, "00015168". Enter that into the value field (A) and click, "OK" to apply the value (B):

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/214_Orig.\CFE}
\end{figure}
\noindent
Once done, note below that our NULL item has magically turned into Rad-X! I bet Lucky Harith has never felt so safe! (B). Also note the text is in Bold, marking it for saving. You can also edit other values about the object as needed (such as count, etc.) as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/215_Orig.\CFE}
\end{figure}
\newpage
\noindent
The last thing we need to do is save our changes! You can do this via either selecting, "Alt-S" and/or close FNVEdit to render the "Save changed files" window. Here you can select/check any mod you want to save (A), and click, "OK" to save the files (B) as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=80mm]{Images/216_Orig.\CFE}
\end{figure}
\noindent
Note that different kinds of records will require different actions when adding new references, as scripts are different from items which are different from NPCs. You can take some time and explore the different types of additions as needed.
\newpage


\subsection{Marking Nodes as Modified} \label{Chapter_8_5_Marking_Nodes_as_Modified}
This function is used to mark records modified, meaning they will be saved when you press, "Alt-S" or exit FNVEdit. This is sometimes necessary when a mod author wants to force an update of a particular records or group of records to save even though FNVEdit registers no change. The process is one-step as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/217_Orig.\CFE}
\end{figure}
\noindent
The screenshot below shows the results, in which the record that was Marked as Modified now has Bold text (A). This record will now be saved when you exit.

\begin{figure}[H]
  \centering
  \includegraphics[width=150mm]{Images/218_Orig.\CFE}
\end{figure}


\subsection{Copying and Replicating Idle Animations} \label{Chapter_8_6_Copying_and_Replicating_Idle_Animations}
Copying and Replicating Idle Animations is a specialized function that was written for \xhref{http://forums.bethsoft.com/user/7327-martigen/}{Martigen} in support of \xhref{http://www.nexusmods.com/fallout3/mods/3211/?}{Marts Mutant Mod (MMM)}. What the function does is to copy a set of NPC idle animations from a list of available animations into an NPC. In this way, the process of creating new NPCs is dramatically improved and much less prone to errors when assigning idle animations. This process describes how that function works, and is clearly geared towards the mod author. \vspace{3mm} \\
To start the action, launch FNVEdit and Right-click in open space somewhere in the window (A) to render a small context menu. Select, "Apply None" (B) from this menu to de-select everything. You can then Left-click the check box for just the mod you want to copy idle animations into (C), and then, "OK" to load it (D). As this function was written by \xhref{http://forums.bethsoft.com/user/380528-elminstereu/}{Elminster} for \xhref{http://forums.bethsoft.com/user/7327-martigen/}{Martigen}, we of course will feature MMM in this section as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/219_Orig.\CFE}
\end{figure}
\noindent
Once loaded FNVEdit presents the typical output as shown below, in which MMM and its Master file references are the only record-trees shown in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} (A):

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/220_Orig.\CFE}
\end{figure}
\newpage
\noindent
Next we'll want to open \xhref{http://www.nexusmods.com/fallout3/mods/3211/?}{MMM} up in the Left-Side Panel by Left-clicking on the record tree (A and B). This will expose the interior of the MMM plug-in, and allow you to select the NPC that you want to copy Idle Animations into (C). Right-click on this NPC (C) to render the main context menu, then select, "Copy Idle Animations into\ldots" as shown:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/221_Orig.\CFE}
\end{figure}
\noindent
You will be presented with the classic FNVEdit warning window, harkening doom upon the universe should you dare attempt to tamper with this mod file! Indeed, you should not change other people's mod files as a general rule. We are only changing MMM for the purposes of this tutorial; just don't save it when you're done eh?

\begin{figure}[H]
  \centering
  \includegraphics[width=100mm, frame]{Images/222_Orig.\CFE}
\end{figure}
\noindent
If you dare, select, "Yes I'm absolutely sure" to continue.
\newpage
\noindent
Next you will be presented with the, "Which Idles do you want to copy?" window, which offers the Master selection of available idle animations that you can choose from. Do not ask me how to create these idle animations, as I do not know. You can ask \xhref{http://forums.bethsoft.com/user/7327-martigen/}{Martigen} in the forums about this, but I recommend strong doses of Rad-X first or he may simply morph you into a night-ghoul for daring to bother him. Otherwise, take the wise choice and select one of the available groups of idle animations to copy (A) and the click, "OK" to load them into the buffer (B) as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/223_Orig.\CFE}
\end{figure}
\noindent
You will now be presented with a series of small Edit Box windows, which are used to customize the naming of these idle animations and thus prevent duplicates. The first window asks for a new Model Prefix (A) - which allows you to specify a new model-name for these animations as shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/224_Orig.\CFE}
\end{figure}
\newpage
\noindent
The next EditorID window allows you to Remove a portion of the current idle animations name in the new versions your creating (A). This is Optional, click "OK" either way.

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/225_Orig.\CFE}
\end{figure}
\noindent
The next EditorID Prefix window allows you to add a new unique name to the Beginning of each animation name (A). Pick something unique to your mod:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/226_Orig.\CFE}
\end{figure}
\noindent
The last EditorID Suffix window allows you to add something to the End of each animation name (A), which again is Optional. Click, "OK" either way to finish:

\begin{figure}[H]
  \centering
  \includegraphics[width=130mm]{Images/227_Orig.\CFE}
\end{figure}
\newpage
\noindent
Finally we reach the last step, in which a window is presented with the available loaded mod-files that you can copy these idle animations into. For the purposes of this demo we chose \xhref{http://www.nexusmods.com/fallout3/mods/3211/?}{MMM}'s Master file (A), as shown in the screenshot below:

\begin{figure}[H]
  \centering
  \includegraphics[width=120mm]{Images/228_Orig.\CFE}
\end{figure}
\noindent
Selecting, "OK" (B) will execute the paste command and place the new idle animations into the mod file you specified. The screenshot below illustrates a typical result, in which both the File Header and Idle Animation record headings show with Bold text (indicating that they have changed and are thus marked as modified for saving):

\begin{figure}[H]
  \centering
  \includegraphics[width=160mm]{Images/229_Orig.\CFE}
\end{figure}
\noindent
Opening the Idle Animation record tree in the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} (B) will reveal the newly-copied animations as shown below.
\newpage
\noindent
The output screenshots below illustrate both the \xhyperref{Chapter_2_3_2_Left_Side_Panel}{Left-Side Panel} results (below) and the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} output for each new animation (bottom). Note how each animation that was copied now carries the new Prefix, "Animations" (B) as well as the new Suffix, "mmm" (C) that we chose in the four EditorID windows.

\begin{figure}[H]
  \centering
  \includegraphics[width=140mm]{Images/230_Orig.\CFE}
\end{figure}
\noindent
Note below the details about each idle animation as shown in the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{View Tab} (B). Each animation includes many variables and details that would be time consuming and error-prone to do by hand. This Copy Idle Animations function automates the process.

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/231_Orig.\CFE}
\end{figure}
\newpage
\noindent
The final step is to save our hard work! Either pressing, "Alt-S" or closing the FNVEdit program with present you with the Save changed files window as shown below. Simply ensure that the mod you worked on is checked (A), and press, "OK" to Save. (Don't try this at home kids!):

\begin{figure}[H]
  \centering
  \includegraphics[width=80mm]{Images/232_Orig.\CFE}
\end{figure}
\noindent
Note again that you should not be changing MMM or any other mod that you did not create. This function is purely for mod authors in creating their own mods which require many new NPCs, for which this function can automation part of the work.


\subsection{Applying Scripts Into} \label{Chapter_8_7_Applying_Scripts_Into}
Download this: \url{http://www.nexusmods.com/fallout3/mods/1904/?} \\  % outdated:  http://Fallout3nexus.com/downloads/file.php?id=1904
It makes use of this function. If you have still questions about it afterward feel free to ask again.


\subsection{Deprecated Functions} \label{Chapter_8_8_Deprecated_Functions}
There are three options in the main context menu that were built for Oblivion and were carried-forward into the Fallout: New Vegas version of FNVEdit. These functions may still work for Oblivion, but they do not work for Fallout: New Vegas and are considered Deprecated functions which should not be used for any reason. You may even crash FNVEdit by trying to run them. These functions that are deprecated for Fallout: New Vegas are:

\begin{itemize}
  \setlength\itemsep{\CustomItemGap}
	\item Object LOD
	\item Set VWD for all REFR with VWD Mesh in this file
	\item Set VWD for all REFR with VWD Mesh copy as override\ldots
\end{itemize}

\newpage





\section{FNVEdit FAQ} \label{Chapter_9_FNVEdit_FAQ}

\subsection{Overview} \label{Chapter_9_1_Overview}
The idea behind the FAQ is to make it easier for you to find the FNVEdit information that you need, without having to read this entire manual - that could put anyone into a coma. As I really don't want the hassle of law suits, it is in both of our best interest that this tutorial is simple to navigate and quick to find resolution to the tasks at hand. \vspace{3mm} \\
FAQ Navigation really means using the FAQ to direct you to the right cell (section) of the document that describes what you need to do. In some cases, the FAQ itself will be all the help that is required. In other cases, you may want/need to learn the process at depth. Each Question/Answer combination has a teleport XMarker that you can activate by holding down Control and Left-Clicking on the XMarker with your mouse. Activation of the XMarker will teleport you to the appropriate cell in the document for further details. \vspace{3mm} \\
The FAQ is divided into Beginner, Intermediate and Advanced sections to better organize the questions, and further insulate your brain from over-exposure to technical documentation. The idea being that most users should start in the Beginner section and advance forward until find the answers you seek. If you do not find the answers you were looking for, please post them in the \xhref{http://forums.bethsoft.com/forum/46-the-geck-fallout-3/}{Bethesda GECK Forum} so that we can update the FAQ.
\vspace{2mm}
\begin{framed}
\vspace{-7mm}
\textcolor[rgb]{0.555,0.555,0.555}{
\begin{itemize}
\item[Note:] \textcolor[rgb]{0.0,0.0,0.0}{All Acquisition and Installation questions are covered in Chapter 2 above.}
\end{itemize}
}
\vspace{-5mm}
\end{framed}
\vspace{3mm}


\subsection{Beginner Questions} \label{Chapter_9_2_Beginner_Questions}
The Beginner FAQ covers two key functions of FNVEdit; Conflict Detection / Resolution and Master Update Mode (MUM). As these are the two most heavily used functions of FNVEdit, we focus beginners on these processes and questions. We start with MUM and end with Conflict Detection / Resolution.


\subsubsection{What mods do I select when I first load FNVEdit?} \label{Chapter_9_2_1}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When loading FNVEdit, do I select all of the mods at once and apply a filter or does it need to be done individually? \vspace{2mm} \\
	\textbf{Answer:}    &  Two Answers here, depending on what you're trying to accomplish:
	                          \begin{itemize}
													    \item[a)] If you're \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{de-conflicting your mods} so that you can play crash-free, then you want to select All of the mods (with the single exception of any previous patch plug-in you created, you don't want to load that if you're building a new patch plug-in).
													    \item[b)] If you're \xhyperref{Chapter_5_2_Mod_Cleaning_Process}{cleaning your mod} or wanting to modify/work on just your own mod, then; Right-click in the load-window and choose, "Select None". Then find your mod in the list and just select that mod. The loader will automatically pick-up any ESM Master files that your mod depends upon. The section on \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Mod Cleaning and Error Checking} will describe the process at depth.
												    \end{itemize}
												 \\
\end{tabularx}
\end{table}
\vspace{3mm}


\subsubsection{Appling conflict filters shows almost every mod has conflicts!} \label{Chapter_9_2_2}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When I apply my conflict detection filter, almost all of the mods in my list have Red backgrounds! Am I totally conflicted here?  \vspace{2mm} \\
  \textbf{Answer:}    &  Red isn't necessarily bad, although it does point you to conflicts. With that many mods, a \xhyperref{Chapter_4_8_Creating_a_Merged_Patch_Automatic_Method}{merged patch Plugin} is a must. Following the instructions in the section on \xhyperref{Chapter_4_6_Understanding_Patch_Plugins_and_Merged_Patches}{Patch Plugins}, and you should see that all of the intended edits will be playing nicer with each other. The chapter on \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{Conflict Detection and Resolution} will show you the differences. \\
\end{tabularx}
\end{table}

\newpage


\subsubsection{Should I make changes to the mods if there is a conflict?} \label{Chapter_9_2_3}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{de-conflicting my mods}, is it okay to drag/drop changes into the mod with a conflict, or just edit the field in the mod to fix the conflict right in that mod file?  \vspace{2mm} \\
  \textbf{Answer:}    &  No, you shouldn't be modifying mods you didn't create yourself like that or you'll just get into trouble the next time one of these mods is updated. Instead you should use "copy as override into" a new Plugin on the currently winning record version and then drag n' drop the changes from all other record versions together. \xhyperref{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}{Creating a patch plug-in} which can be loaded after all the conflicting mods to resolve these conflicts. The chapter on \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{Conflict Detection and Resolution} will show you the differences. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Where in the load-order should my patch plug-in be placed?} \label{Chapter_9_2_4}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Where in the load-order should my patch plug-in be placed?  \vspace{2mm} \\
  \textbf{Answer:}    &  Yes your \xhyperref{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}{merged-patch} loads last, and the Masters (.ESM files) which it patches (.ESM's and .esp's) will be automatically added. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{What does the patch plug-in really do for my Fallout: New Vegas load order?} \label{Chapter_9_2_5}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  What does the patch plug-in really do for my Fallout: New Vegas load order? Do I really need to go through this trouble to create one?  \vspace{2mm} \\
  \textbf{Answer:}    &  If you run more than 25 mods, you really do need to create a patch plug-in in most cases. What the patch does is to join edits to a mod in such a way that both edits will work on the same thing. \vspace{2mm} \\
	                    &  Say for example mod \#1 says you'll find raiders with flamers and mod \#2 adds rocket launchers to them instead. If mod \#2 loads last, it will be the conflict winner and you'll find raiders with flamers. \xhyperref{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}{If you use a patch Plugin}, you'll find raiders with both flamers and rocket launchers. It doesn't always work out this smoothly, but it does in most cases. For an in-depth discussion see the chapter on \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{Conflict Detection and Resolution}. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Does FNVEdit MasterUpdate correct the white face bug?} \label{Chapter_9_2_6}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Does FNVEdit MasterUpdate correct the white face bug? It is the only one I have been able to find since trying this - it is great otherwise.  \vspace{2mm} \\
  \textbf{Answer:}    &  Reports we got during testing seems to indicate that \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} fixes the white face bug. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{What version of Fallout: New Vegas edit do I need FNVEdit for?} \label{Chapter_9_2_7}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Do I need to run FNVEdit under Fallout: New Vegas v1.4 first and then apply the v1.5 patch?  \vspace{2mm} \\
  \textbf{Answer:}    &  No you don't need to reinstall. All you need to do is to make sure that you run \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} after any change to your load order. You can run FNVEdit under any version of Fallout: New Vegas. \\
\end{tabularx}
\end{table}
\newpage


\subsubsection{Does FNVEdit fix Enclave radio broken by the Broken Steel?} \label{Chapter_9_2_8}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Can the MasterUpdate using FNVEdit cause Enclave radio to come back on air during broken steel?  \vspace{2mm} \\
  \textbf{Answer:}    &  I'm pretty sure I've heard about people complaining about this here on the Forum before I ever released \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} even for testing. I would guess it's one of (many) bugs in BrokenSteel.ESM or a conflict with some other mod you've installed. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{What happens if I can't get rid of my conflicts?} \label{Chapter_9_2_9}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  What happens if I still have mod conflicts in-game even after creating a patch Plugin and running MasterUpdate mode (i.e. "Modding-Up")?  \vspace{2mm} \\
  \textbf{Answer:}    &  There is frankly nothing that FNVEdit can do different in \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate}, all it does is turn everything into a Master and creates the necessary ONAM records for the Masters to talk back and forth. Any problems that show up after patching up to 1.5 and running \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} are the result of either: \vspace{-5mm} \\
	                    &  \begin{itemize}
                           \setlength\itemsep{\CustomItemGap}
	                         \item General bugs in Patch release your running.
	                         \item A problem specific to how Masters are handled.
	                         \item A module file that's broken in some way (which might show up more or at all because 1.5+ESM is now doing something RIGHT at the engine level).
	                         \item Conflicts between installed modules (ditto)
	                         \item See the chapter on Conflict Detection and Resolution if you're still stuck for instructions on how to "Slay the Bug".
												 \end{itemize}
												 \\
\end{tabularx}
\end{table}
\vspace{3mm}


\subsubsection{I get an error, "Record XXXX is not contained in a group"?} \label{Chapter_9_2_10}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  What should I do when I get an error during loading FNVEdit like this:  \vspace{2mm} \\
	                    &  "Record fBloodSplatterFadeStart [GMST:080304D5] is not contained in a group." and I had to disable it to get the Master update to complete. Is this something I've done wrong with load order or some sort of conflict, or something that needs to be reported to the mod author to correct in the esp? \vspace{2mm} \\
  \textbf{Answer:}    &  As I said before, there are still many mods out there that have been hacked together in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} and are not actually structurally valid Fallout: New Vegas module files. \vspace{2mm} \\
	                    &  Important with such mods: Do NOT just disable it, run \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} and then ENABLE it again. \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} will only work correctly if it has processed ALL the modules you load into your game. This is an all or nothing deal. \vspace{2mm} \\
											&  Any module that gives trouble during loading or saving in FNVEdit/\xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} is BROKEN anyway and should never be loaded into any game, no matter if it's as Plugin into pre-1.5 or ESM'ified into 1.5. \\	
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Does MasterRemove remove the ONAM records added by MasterUpdate?} \label{Chapter_9_2_11}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  A question about MasterRestore mode: does it remove the ONAM records added by MasterUpdate, or are the ONAM records harmless on Plugin files?  \vspace{2mm} \\
  \textbf{Answer:}    &  When with \xhyperref{Chapter_3_3_Master_Restore_Mode}{MasterRestore} the ESM flag is turned off, the ONAM's automatically go away. "Yes" and "Yes, as far as I know". \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can I run MasterUpdate one-mod-at-a-time, to check them out?} \label{Chapter_9_2_12}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Is there any downside to checking one mod in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}, and then running \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate}. Then after it's finished, and there's no errors, checking the next mod in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} and running MasterUpdate again? Doing it mod by mod like that until eventually they're all checked?  \vspace{2mm} \\
  \textbf{Answer:}    &  No, that should be fine as long as you don't Play the game in-between these steps. \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} MUST be run with your full mod-list checked before you play. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{What's with all these backup files building-up in my Data directory?} \label{Chapter_9_2_13}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I've been getting a lot of 0/1kb insertmodnamehere.esp save/backup files in my data folder. What exactly are these?  \vspace{2mm} \\
  \textbf{Answer:}    &  When FNVEdit or \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} saves a file, it writes as a first step a new  file with .esp/m.save.<datetime> as extension. When you then close the program (and in case of \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate}, only if there weren't any errors when saving any of the files) then the existing original module files are renamed to .esp/m.backup.<datetime> and the newest .esp/m.save.<datetime> file for each module is renamed to .esp/m. These can be deleted without worry of harming your game or mods, and are purely for backup purposes. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How many mods can F03Edit load?} \label{Chapter_9_2_14}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  How many mods can F03Edit load? I can't seem to get but just half of my mods loaded at one time. I have over 170 mod to edit am I missing something or doing something wrong?  \vspace{2mm} \\
  \textbf{Answer:}    &  You can have 256 total mods in Fallout: New Vegas and FNVEdit, one more then the game engine itself. However, FNVEdit is uses a lot of memory to load entire mod lists and compare everything - and that goes up the more mods you add. If you find that you cannot run FNVEdit with a huge number of mods, check to see that your computer is not running out of memory. FNVEdit will warn you that memory is exhausted in most cases. \vspace{2mm} \\
	                    &  I have made FNVEdit work successfully with close to 200 mods loaded on a Windows XP machine with 3 gigs of Ram. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Will MasterUpdate work if I have 200+ mods?} \label{Chapter_9_2_15}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  With the MasterUpdate function, can I use this if I have lots of mods (.esp and .ESM files) installed and have never done the MasterUpdate before? Or does it have to be started with a fresh game install and then performed one mod at a time? Hopefully my question makes sense.  \vspace{2mm} \\
  \textbf{Answer:}    &  There is no problem running \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} with a large number of mods. If you currently have a large setup that works correctly under pre-1.5, you can just run \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} on it, patch to 1.5, remove the fake patch if you use it, and everything should work. \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} mode also takes less Ram then when doing conflict detection with FNVEdit itself. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{After Filtering for conflicts, I don't see anything on the Left-hand side!} \label{Chapter_9_2_16}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  After I run FNVEdit, and after filtering for conflict detection, if there's nothing on the left side, does that mean my load order is fine?  \vspace{2mm} \\
  \textbf{Answer:}    &  Yes if you ran through the \xhyperref{Chapter_4_Conflict_Detection_and_Resolution}{conflict resolution process} and get no red or yellow coloring, you're clean! Nice work! \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Why does the change confirmation window force me to wait?} \label{Chapter_9_2_17}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When I first make changes to a mod, I get a huge timed warning that forces me to wait before allowing me to click Yes. Is there any way to turn the three-second modify warning off?  \vspace{2mm} \\
  \textbf{Answer:}    &  Yes, but it's there for a reason. Also, the 3 second delay gets reduced by a few fractions of a second every time you confirm that dialog till after a while it's completely gone. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{I deleted a plug-in file but FNVEdit seems to think it's still there?} \label{Chapter_9_2_18}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I deleted a plug-in file but FNVEdit seems to think it's still there? When FNVEdit load itself, I see the messages about "Error: Active Plugin List contains nonexistent file "merged.esp"". I'm absolutely sure- I remove this ESP from load order and from disk with help of \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}. What's the deal?  \vspace{2mm} \\
  \textbf{Answer:}    &  That means that you deleted the file from disk, but it's still listed as an active Plugin in your Plugins.txt (see the message log for the location of that file). The Plugins.txt file is used by the game engine to decide which modules to load. \vspace{2mm} \\
	                    &  Any listed module which doesn't exist in the file system is just ignored by the game engine (and FNVEdit). So there is nothing to worry about with that error message. It has no further consequences. If you want to remove the error message, edit the Plugins.txt file and remove its entry from that file. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How do I start the Master update mode?} \label{Chapter_9_2_19}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  How do I start the Master update mode? Do I just load FNVMasterUpdate.exe and it does it automatically? I didn't see any special options after right clicking any mods.  \vspace{2mm} \\
  \textbf{Answer:}    &  If you renamed your FNVEdit.exe to FNVMasterUpdate.exe, then all you need to do is start it. \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} should run through and do its work automatically. \vspace{2mm} \\
	                    &  If you get an --= All Done =-- at the end of the log you are fine and ready to play after closing the program. However if you get an --= Error =-- then you need to read the log closely and resolve whatever is the problem till you get the All Done. \vspace{2mm} \\
											&  Do not make any changes to your load order (activating/deactivating/moving any modules) between running \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} and playing the game. If you do make changes to your load order, run \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} again. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Should I make a new merged patch if I change my load order in FOMM?} \label{Chapter_9_2_20}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  So if I make a new load order in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}, should I make a new merged patch as well right?  \vspace{2mm} \\
  \textbf{Answer:}    &  That is correct, if you change the load order you need to create a new merged patch so that the data is always kept in the right order. Failure to do this can result in CTD's. That's why Patch Plugin's should be a last resort and not automatically what you do to resolve conflicts. \vspace{2mm} \\
	                    &  The best practice is to create a patch plug-in once you are reasonably sure that your loadorder is settled and static for your current game/character. After you start playing, altering the load order can result in problems for that character, so it's best to put the effort into a patch plug-in once you're ready to start seriously gaming OR if you have serious conflicts that can't be resolved by changing the load-order alone. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{I am having problems getting FNVEdit to work on Vista.} \label{Chapter_9_2_21}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I am having problems getting FNVEdit to work on Vista in the Program Files folder. Am I doing something wrong?  \vspace{2mm} \\
  \textbf{Answer:}    &  It is possible to install the game to the Program Files folder under Vista, but you have to deal with the UAC security first. You have three options: \vspace{-2mm} \\
	                    &  \begin{enumerate}
                           %\setlength\itemsep{\CustomItemGap}
	                         \item Disable the UAC completely, but this will leave your system more vulnerable.
	                         \item Install in a folder not controlled by UAC.
	                         \item A much better way to solve the problem (of write-redirection to the VirtualStore) is to simply give the "Users" group "Full Control" of the Fallout: New Vegas folder.
                         \end{enumerate} \\
\end{tabularx}
\end{table}
\vspace{3mm}


\subsubsection{After FNVEdit loads, I can't get the context menu on the left to load!} \label{Chapter_9_2_22}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  After FNVEdit loads, I can't get the context menu on the left-hand side to load up! I can rightclick in the right-window, but the left window gives me nothing. What's up with that?"  \vspace{2mm} \\
  \textbf{Answer:}    &  In these cases there is actually a problem with your files or your load-order, and FNVEdit is unable to process them. Exit FNVEdit and use \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} to check/correct any load-order issues. Make sure your patch plug-ins (if you have one) loads last as well and re-run FNVEdit. See the \xhyperref{Chapter_2_3_Tour_of_User_Interface}{Interface Tour} to gain a better understanding of the views. \\
\end{tabularx}
\end{table}

\newpage


\subsection{Intermediate Questions} \label{Chapter_9_3_Intermediate_Questions}

\subsubsection{Should I clean all of the mods that I use including FOOK, FWE, MMM, etc.?} \label{Chapter_9_3_1}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Should I clean all of the mods that I use including FOOK, FWE, MMM, etc.?  \vspace{2mm} \\
  \textbf{Answer:}    &  No, you should only clean a mod that you own or are on a team that owns. If you think that a mod is very dirty and should be cleaned, the best approach is to recommend it to the mod author on the forums. See the section on \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Mod Cleaning and Error Checking} for more information. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Is there a function that pops up if you double click something?} \label{Chapter_9_3_2}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Is there a function to the window that pops up if you double click something? There doesn't seem to be a way to edit anything in that window.  \vspace{2mm} \\
  \textbf{Answer:}    &  Yes, it makes it possible to read long texts like script source. See the section on \xhyperref{Chapter_8_4_Changing_and_Adding_References}{Adding and Editing References} for more information. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{What is the difference between 'copy as override' and 'deep copy as override'?} \label{Chapter_9_3_3}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  What is the difference between 'copy as override' and 'deep copy as override'?  \vspace{2mm} \\
  \textbf{Answer:}    &  If you copy a DIAL record as override it only copies that DIAL record, if you use "deep copy" as override then it also copies all the INFO records underneath. See the section on creating a \xhyperref{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}{Manual Patch Plugin} for examples of how to use Overrides and Deep Overrides. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Replicating a dialogue block with all topic blocks that belong to it} \label{Chapter_9_3_4}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  What if I want to replicate a dialogue block with all topic blocks that belong to it?  \vspace{2mm} \\
  \textbf{Answer:}    &  You need to get a copy of a DIAL and all INFO records under it as new records using the following: \\
	                    &  \vspace{-3mm}
											   \begin{itemize}
                           \setlength\itemsep{\CustomItemGap}
	                         \item Use "Deep Copy as Override into...".
	                         \item Go to the override copy of the DIAL record (you can just Ctrl+click on the "Record Header $\backslash$ FormID" field of the override copy in the detail view)
	                         \item Select that record in the navigation tree view.
	                         \item Press F2 (opens the change FormID dialog)
	                         \item Backspace (clears the FormID)
	                         \item Enter (shows the dialog again with a newly generated unique FormID)
	                         \item Enter (confirms the change)
	                         \item Repeat for the INFO records (Cursor Down, F2, Backspace, Enter, Enter, repeat)
	                         \item See the section on creating a \xhyperref{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}{Manual Patch Plugin} for examples of similar actions using Copy as Override / Deep Override Into.
                         \end{itemize} \\
\end{tabularx}
\end{table}
\newpage


\subsubsection{Having troubles updating stuff from one mod version to another} \label{Chapter_9_3_5}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I am running into issues trying to update stuff from one version of a mod to another.  \vspace{2mm} \\
  \textbf{Answer:}    &  For comparing / moving data between 2 versions of the same mod: \\
	                    &  \vspace{-3mm}
											   \begin{itemize}
                           \setlength\itemsep{\CustomItemGap}
	                         \item When starting FNVEdit, only load ONE of the 2 versions.
	                         \item Select the file in the navigation tree view.
	                         \item context menu $\rightarrow$ Compare to
	                         \item select the 2nd file in the file open dialog (it needs to be in the data folder for this to work currently)
	                         \item the 2nd file now gets loaded with the same load order index as the first file
	                         \item See the section on creating a \xhyperref{Chapter_4_7_Creating_a_Patch_Plugin_Manual_Method}{Manual Patch Plugin} for examples of similar actions using Copy as Override / Deep Override Into.
                         \end{itemize} \\
											&	 \vspace{-5mm} Doing that FNVEdit would have recognized the records in the 2 modules as being overrides of each other which would have simplified copying stuff around a lot. \vspace{2mm} \\
											&  Also see the section on \xhyperref{Chapter_6_7_Comparing_Two_Versions_of_a_Mod}{Comparing Two Versions of a Mod} for examples of how to compare them efficiently. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How do I convert an ESP into an ESM?} \label{Chapter_9_3_6}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I'm trying to turn an .esp into an .ESM using FNVEdit, but I can't seem to find a way to save the file as an .ESM or "convert" it as it were. I know that there is a way to do it, I believe there's supposed to be a copy into... function, yet I can't seem to find it.  \vspace{2mm} \\
  \textbf{Answer:}    &  Look at the File Header. Set the ESM Record Flag. Save. You are done. The file extensions do not matter for the game engine. But if you want you can now rename your file from .esp to .ESM. See the section on \xhyperref{Chapter_6_5_Converting_a_Plugin_into_a_Master}{Converting a Plugin into a Master} for a detailed description. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Why should I "clean" my mod? It works just fine how it is!} \label{Chapter_9_3_7}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Why should I "clean" my mod? It works just fine how it is!  \vspace{2mm} \\
  \textbf{Answer:}    &  The large majority of mods currently in circulation are unfortunately in rather appalling condition, with dirty edits, deleted references, unintended changes, you name it. GECK makes it very easy for these things to slip in. Even worse, there are still a significant number of mods out there which have been hacked together in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} or even hex editors that in no way shape or form conform to the implicit rules of the FO3 module file format. See the chapter on \xhyperref{Chapter_5_Mod_Cleaning_and_Error_Checking}{Mod Cleaning and Error Checking} for a detailed description of how this is done. \vspace{2mm} \\
	                    &  What is needed from all mod authors is a concentrated effort to clean up their mods and in general minimize the number of vanilla records they touch to reduce conflict potential. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Many of my NPCs in-game has stark white-faces!?} \label{Chapter_9_3_8}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Many of my NPCs in-game has stark white-faces! Did FNVEdit do this?  \vspace{2mm} \\
  \textbf{Answer:}    &  The white face bug is Not fixed by FNVEdit. The bug that FNVEdit fixes is the white BODY bug. To fix the white face bug, you have to edit your fallout.ini and add this line below the [General] statement: \vspace{2mm} \\
	                    &  bLoadFaceGenHeadEGTFiles=1 \\
\end{tabularx}
\end{table}
\newpage


\subsubsection{I have FOOK and get a load error like this, did I do something wrong?} \label{Chapter_9_3_9}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I have FOOK and get a load error like this, did I do something wrong?  \vspace{2mm} \\
	                    &  "[00:20] Background Loader: Error: record LVLI contains unexpected (or out of order) subrecord LVLI 494C564C" \vspace{2mm} \\
  \textbf{Answer:}    &  Nothing you or FNVEdit did wrong. I'm aware for some time now that FOOK 1.6 contains this broken deleted record. Besides being broken, it shouldn't have been deleted in the first place and can cause CTDs. \vspace{2mm} \\
	                    &  You can fix it with FNVEdit by loading FOOK.esp (as you are obviously doing) then going to that record (enter 0002968D into the FormID search edit above the navigation tree view and press enter) and then REMOVE that record from FOOK.esp. Make sure that you are removing it from the right file! (It should have the "Deleted" Record Flag set in FOOK.esp). \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{I found records that I've changed don't exist in FalloutNV.ESM!} \label{Chapter_9_3_10}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When opening an esp in FNVEdit, it shows that of all the iXPReward**** records I've changed, that these ones do not exist in FalloutNV.ESM. The other Game Settings I've edited show the yellow/green colors of "override without conflict", but these 5 are simply black on white, as if these are brand new settings. Is this a bug in FNVEdit?  \vspace{2mm} \\
  \textbf{Answer:}    &  No it is not. The default values for the different GMSTs are hardcoded in the exe (both GECK and game engine). GMST sub records in FalloutNV.ESM are only present for the GMSTs that have been overridden by the game designers from their hardcoded default values (which were set by the programmers in source code). \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How do I reverse MasterUpdate so I can edit my ESP in the GECK?} \label{Chapter_9_3_11}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I checked the OP for instructions on how to reverse FNVMasterUpdate... how is it done?  \vspace{2mm} \\
  \textbf{Answer:}    &  Either run \xhyperref{Chapter_3_3_Master_Restore_Mode}{FNVMasterRestore.exe} (preferred) or revert to the last backup made when \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{MasterUpdate} ran last. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How can I see individual records from a mod?} \label{Chapter_9_3_12}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  How can I see individual records from a mod?  \vspace{2mm} \\
  \textbf{Answer:}    &  By navigating that tree view you can look at every single record in any of your modules. Once a record has been selected the detailed contents of that record is shown on the right side. The detail view shows all versions of the selected record from all modules which contain it. See the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{Right-Side View Tab} tour for details. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How do I view all of the references in a mod, not just conflicts?} \label{Chapter_9_3_13}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When I load the ESP I've been working with, which depends on 2 ESMs (Fallout: New Vegas of course, and BHRM--Bobblehead Remove and Move), neither the ESP, nor the additional ESM, will show me everything until I tell it to filter some of the extraneous information out. How do I view all of the references? \vspace{2mm} \\
  \textbf{Answer:}    &  In the \xhyperref{Chapter_2_3_7_Right_Side_View_Tab}{Right-Side View Tab}, right click and make sure "hide no conflict rows" is unchecked. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{I cleaned my mod and am getting CTDs with NAVM errors?} \label{Chapter_9_3_14}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I just cleaned my mod and am having CTD's and all sorts of errors with NAVM records? Did the cleaning process break my mod?  \vspace{2mm} \\
  \textbf{Answer:}    &  NAVM and NAVI records work together in that the NAVI is an index of sorts for the NAVM records. Thus if the cleaning process removes any NAVM records, you must update the NAVI data as well. Thus after any cleaning which touches NAVM records you will have to simply Load and Re-Save the file GECK so that the NAVI records are re-built (which the GECK does automatically when you save). After saving, run MasterUpdate and you should be good to go. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{How do I reverse an un-intended change?} \label{Chapter_9_3_15}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I made some un-intended changes to the main game files and don't know how to un-do those changes so that the original versions return. How is this done?  \vspace{2mm} \\
  \textbf{Answer:}    &  Normally the word "remove" is used to describe removing a record from a module (in which case, if it was an override record, the original will "shine through" again). While "delete" normally refers to setting the "Deleted" flag on a record (in which case this "deleted" record will hide away whatever original record it overrides). \\
\end{tabularx}
\end{table}
\vspace{7mm}
\newpage


\subsection{Advanced Questions} \label{Chapter_9_4_Advanced_Questions}

\subsubsection{What is FalloutNV.hardcoded.esp?} \label{Chapter_9_4_1}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  What is FalloutNV.hardcoded.esp?  \vspace{2mm} \\
  \textbf{Answer:}    &  This file contains some records which are hardcoded in GECK and the game engine (not contained in FalloutNV.ESM) but referenced from records in FalloutNV.ESM. PlaneMarker and PortalMarker STAT records to name just one example. The FalloutNV.hardcoded.esp must be in the same folder as the FNVEdit.exe and NOT in the Data folder. The game engine or GECK will never see that file and never load it. \vspace{2mm} \\
	                    &  When you start GECK without loading FalloutNV.ESM, you can see that there are some records already defined. The reason is that these records are hardcoded in the exe already. Some of these records are overridden in FalloutNV.ESM. Some others are not. But FalloutNV.ESM contains records with references to some of these hardcoded records that are not being overridden. \vspace{2mm} \\
											&  If you now load FalloutNV.ESM alone in FNVEdit, which doesn't have these "hardcoded" records in the exe itself like GECK. Then it appears as if FalloutNV.ESM contains a lot of invalid references. This is where FalloutNV.hardcoded.esp comes in. It contains all the hardcoded records which are not overridden in FalloutNV.ESM already. By loading this esp at the same load order ID as FalloutNV.ESM it is as if these records were defined in FalloutNV.ESM. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can I have a plug-in that references another plug-in as its Master?} \label{Chapter_9_4_2}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Can I have a plug-in that references another plug-in as its Master? FNVEdit seems to do this, but I don't see how to do it in the GECK.  \vspace{2mm} \\
  \textbf{Answer:}    &  FNVEdit can handle Plugins (.esp) having other Plugins as Master. GECK cannot, so such a file can no longer be simply opened in GECK. See the section on \xhyperref{Chapter_6_2_Adding_Master_Files_to_a_Plugin}{Adding Masters to a Plugin} for more details. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can I remove the delay between clicking an entry and the edit box?} \label{Chapter_9_4_3}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When trying to Edit a cell, there is a delay between clicking an entry the second time and having the edit-box appear. Can this delay be removed?  \vspace{2mm} \\
  \textbf{Answer:}    &  Just use F2. I'm not quite sure where that delay comes from (but probably has to wait until the system wide configured double click time expires to be sure it's a single click and not a double click). \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Is there a "GoTo" option in the context menu for pulling-up a FormID?} \label{Chapter_9_4_4}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  For sub-records which are form IDs, it would be great to have a 'go to' option in the context menu which would then just select that form ID in the tree view.  \vspace{2mm} \\
  \textbf{Answer:}    &  Hold CTRL down, and then click. Also, for fields where the text doesn't fit, hold SHIFT down and move the mouse over them to get a tooltip with the full text. \vspace{2mm} \\
	                    &  With the Ctrl+Click, you can do that any number of times and then simply return to where you came from with the little back and forward buttons in the top right corner. If you have a mouse with more than 2 keys you can also use the "back" and "forward" keys on your mouse.
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can you help me with the Optcodes for IsInCombat?} \label{Chapter_9_4_5}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  I've just got a query about how we're supposed to input conditions. I'm trying to make a perk that works when you activate something out of combat, but I can't seem to input the "IsInCombat" function. I've tried using the optcode from this list, and I've tried converting the optcode to decimal, but it doesn't display the name.  \vspace{2mm} \\
  \textbf{Answer:}    &  You have to cut off the first 1. So 1121 is 121 $\rightarrow$ 289 $\rightarrow$ IsInCombat. Just tested and works fine. The first 0/1 is for console/non-console. Also, there's a minor typo in the PRKC label. It's not Index, it controls the reference the CTDA is called on. \vspace{2mm} \\
	                    &  \vspace{-5mm}
											   \begin{itemize}
	                         \item[] 0 = player
	                         \item[] 1 = current weapon/activation target
                         	 \item[] 2 = hit target (for combat)
                         \end{itemize} \\
\end{tabularx}
\end{table}
\vspace{3mm}


\subsubsection{During the loading process, I notice some of the mods show Errors} \label{Chapter_9_4_6}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  During the background loading process, I notice some of the mods show Errors, but FNVEdit seems to load them anyway.  \vspace{2mm} \\
  \textbf{Answer:}    &  Many files that have been hacked together using \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} or even a Hex Editor are not conforming exactly to this standard structure and FNVEdit will reject saving such a file (or depending on how severe the problem is might even reject loading such a file). I'd suggest loading it in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM}, running the sanitize spell, resaving it and then try FNVEdit on it again. Sanitize will at least fix the missing group problem that FNVEdit doesn't like. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Is there a way to look up the records opt-codes?} \label{Chapter_9_4_7}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Is there a way to look up the records opt-codes?  \vspace{2mm} \\
  \textbf{Answer:}    &  The numbers there are the opcodes for the functions used. The full list of functions is here: \\
                      &  \url{http://fose.silverlock.org/Fallout: New VegasCommands.html} \\   % http://geck.bethsoft.com/index.php?title=Complete_List_of_Functions_in_NVSE      or     http://www.gribbleshnibit.com/projects/NVSEDocs/   ??
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{is "HasPerk" available in the CTDAs?} \label{Chapter_9_4_8}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Shortcut question: is "HasPerk" (which IS a script command) available as far as you know, in the CTDAs?  \vspace{2mm} \\
  \textbf{Answer:}    &  Those numbers are in hexadecimal code, you need to drop the first 1, and then convert the last 3 digits to decimal. So on that list, GetPermAV is 11EF. You drop the 1 to make it 1EF, then convert that to decimal, which gives 495. To make your life easier, HasPerk is 449. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can we edit text in the expanded windows?} \label{Chapter_9_4_9}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Can we edit text in the expanded windows? I'm trying to write a script and it's a bit inconvenient to write it in notepad and copy-paste across.  \vspace{2mm} \\
  \textbf{Answer:}    &  This works by double clicking while holding the shift key. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Where can I learn more about FLST Lists?} \label{Chapter_9_4_10}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Where can I learn more about FLST Lists?  \vspace{2mm} \\
  \textbf{Answer:}    &  An advanced discussion can be found on the \href{http://forums.bethsoft.com/?showtopic=971140}{Bethesda Forums}. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can we list the mod index for each Master/Plugin loaded in the dump?} \label{Chapter_9_4_11}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Would it be possible to list the mod index for each Master/Plugin loaded (included the module specified) in the dump? Then you could determine a record's module directly from its FormID.  \vspace{2mm} \\
  \textbf{Answer:}    &  Different then what FNVEdit is showing you, the dump is NOT showing load order corrected FormIDs. You see the FormIDs as they are stored in the file. This means that the MAST subrecords from the TES4 file header directly give you all the information you need to map FormIDs to files. e.g. if there are 3 MAST sub records then FormIDs starting with 00, 01 and 02 belong to these 3 files in that order, everything starting with 03 (or higher!) belongs to the file you are dumping. \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{I have a lot of house-mods that are conflicting, how do I fix this?} \label{Chapter_9_4_12}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  My load list is smaller than most here, but I have a large selection of houses that were causing problems, as well as a few others like the vertibird that would crash if you left it and walked away. How do I fix this?  \vspace{2mm} \\
  \textbf{Answer:}    &  First, check if any of your active modules are NOT Masters. You can see that easily in \xhref{http://www.nexusmods.com/newvegas/mods/36901/?}{FOMM} if any of them are not shown in bold. If yes, run \xhyperref{Chapter_3_Master_Update_and_Master_Restore}{FNVMasterUpdate} again and see if the problem if gone. \vspace{2mm} \\
	                    &  If not, determine the FormID of the problematic character(s). Then start FNVEdit and don't make any changes to the to-be-loaded modules. Now put the FormID into the FormID search box (above the navigation tree view) and hit enter. Check if that record is touched by any of you installed mods. Also check the NPC record that the ACHR is based on (you can hold down CTRL and then click on the NAME field to jump to that record). \\
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Will FNVEdit merge the Eyes, Hairs, Mouth pieces, etc.?} \label{Chapter_9_4_13}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  When merging patches that modify facial characteristics, will FNVEdit merge the Eyes, Hairs, Mouth pieces, etc.?  \vspace{2mm} \\
  \textbf{Answer:}    &  Important with that: eyes and hairs are merged, the rest not. So if you (or anyone) have a mod which makes changes to something other than hairs or eyes, load that mod last so that the hair and eye changes get merged into it. \vspace{2mm} \\
	                    &  So that means that TK's eyelash mod has to be last since it mods a lot of the head parts (like merging the whole mouth to make an open slot for the eyelashes).
\end{tabularx}
\end{table}
\vspace{7mm}


\subsubsection{Can I merge destruction-data into my patch plug-in?} \label{Chapter_9_4_14}
\vspace{-3mm}
\begin{table}[H]
\begin{tabularx}{\textwidth}{rX}
  \textbf{Question:}  &  Is it possible to get the destruction data that I created for my mod into the merged patch or should I just do it by hand?  \vspace{2mm} \\
  \textbf{Answer:}    &  Destruction data is not one of the things handled by the merged patch function, so you will need to add those elements by-hand to the patch Plugin. \\
\end{tabularx}
\end{table}

\newpage





\section{Cheat Sheets and Quick Reference Charts} \label{Chapter_10_Cheat_Sheets_and_Quick_Reference_Charts}
In the following pages we have included several of the more pertinent reference charts and cheat sheets to make them easier and more accessible to you in the future.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{Images/233_Orig.\CFE}
\end{figure}
\newpage

\noindent
The Conflict Detection Filter Settings are shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/234_Orig.\CFE}
\end{figure}
\noindent
The record/reference Reach ability Info Filter Settings are shown below:

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/235_Orig.\CFE}
\end{figure}
\noindent
The Identical To Master Detection filter settings are shown below (Part 1 of Cleaning Process):

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/236_Orig.\CFE}
\end{figure}
\noindent
The Mod Cleaning filter settings are shown below (Part 2 of Cleaning Process):

\begin{figure}[H]
  \centering
  \includegraphics[width=170mm]{Images/237_Orig.\CFE}
\end{figure}












 
\end{document}